import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as a,b as n}from"./app-Di2jApqi.js";const l={},e=n(`<h2 id="ä¹-httpå¼€å‘webæœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#ä¹-httpå¼€å‘webæœåŠ¡å™¨"><span>ä¹.httpå¼€å‘webæœåŠ¡å™¨</span></a></h2><blockquote><p>ä»€ä¹ˆæ˜¯WebæœåŠ¡å™¨ï¼Ÿ</p><p>å½“åº”ç”¨ç¨‹åºï¼ˆå®¢æˆ·ç«¯ï¼‰éœ€è¦æŸä¸€ä¸ªèµ„æºæ—¶ï¼Œå¯ä»¥å‘ä¸€ä¸ªå°æœåŠ¡å™¨ï¼Œé€šè¿‡Httpè¯·æ±‚è·å–åˆ°è¿™ä¸ªèµ„æºï¼›æä¾›æœåŠ¡å™¨çš„è¿™ä¸ªæœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨ï¼›</p></blockquote><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYZYwgaPR9na9Lym9T8nLzn8aiazAgKTX01Vh9MBr7aEohYhaV4THKdeg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" loading="lazy">WebæœåŠ¡å™¨</p><p>ç›®å‰æœ‰å¾ˆå¤šå¼€æºçš„WebæœåŠ¡å™¨ï¼šNginxã€Apacheï¼ˆé™æ€ï¼‰ã€Apache Tomcatï¼ˆé™æ€ã€åŠ¨æ€ï¼‰ã€Node.js</p><h2 id="ä¸€-httpæ¨¡æ¿åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¸€-httpæ¨¡æ¿åŸºæœ¬ä½¿ç”¨"><span>ä¸€. Httpæ¨¡æ¿åŸºæœ¬ä½¿ç”¨</span></a></h2><h3 id="_1-1-å¦‚ä½•åˆ›å»ºæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_1-1-å¦‚ä½•åˆ›å»ºæœåŠ¡"><span>1.1. å¦‚ä½•åˆ›å»ºæœåŠ¡</span></a></h3><h4 id="_1-1-1-webæœåŠ¡å™¨åˆä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#_1-1-1-webæœåŠ¡å™¨åˆä½“éªŒ"><span>1.1.1. WebæœåŠ¡å™¨åˆä½“éªŒ</span></a></h4><p>åˆ›å»ºä¸€ä¸ªWebæœåŠ¡å™¨çš„åˆä½“éªŒï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const http = require(&#39;http&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const HTTP_PORT = 8000;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const server = http.createServer((req, res) =&gt; {</span></span>
<span class="line"><span>  res.end(&quot;Hello World&quot;);</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span></span></span>
<span class="line"><span>server.listen(8000, () =&gt; {</span></span>
<span class="line"><span>  console.log(\`ğŸš€æœåŠ¡å™¨åœ¨\${HTTP_PORT}å¯åŠ¨~\`)</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-1-2-åˆ›å»ºæœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#_1-1-2-åˆ›å»ºæœåŠ¡å™¨"><span>1.1.2. åˆ›å»ºæœåŠ¡å™¨</span></a></h4><p>åˆ›å»ºæœåŠ¡å™¨å¯¹è±¡ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ <code>createServer</code> æ¥å®Œæˆçš„</p><ul><li><code>http.createServer</code>ä¼šè¿”å›æœåŠ¡å™¨çš„å¯¹è±¡ï¼›</li><li>åº•å±‚å…¶å®ä½¿ç”¨ç›´æ¥ new Server å¯¹è±¡ã€‚</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>function createServer(opts, requestListener) {</span></span>
<span class="line"><span>  return new Server(opts, requestListener);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ¥åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const server2 = new http.Server((req, res) =&gt; {</span></span>
<span class="line"><span>  res.end(&quot;Hello Server2&quot;);</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span></span></span>
<span class="line"><span>server2.listen(9000, () =&gt; {</span></span>
<span class="line"><span>  console.log(&quot;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ~&quot;);</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œåˆ›å»ºServeræ—¶ä¼šä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li>reqï¼šrequestè¯·æ±‚å¯¹è±¡ï¼ŒåŒ…å«è¯·æ±‚ç›¸å…³çš„ä¿¡æ¯ï¼›</li><li>resï¼šresponseå“åº”å¯¹è±¡ï¼ŒåŒ…å«æˆ‘ä»¬è¦å‘é€ç»™å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼›</li></ul><h4 id="_1-1-3-ç›‘å¬ç«¯å£å’Œä¸»æœº" tabindex="-1"><a class="header-anchor" href="#_1-1-3-ç›‘å¬ç«¯å£å’Œä¸»æœº"><span>1.1.3. ç›‘å¬ç«¯å£å’Œä¸»æœº</span></a></h4><p><strong>Server</strong>é€šè¿‡listenæ–¹æ³•æ¥å¼€å¯æœåŠ¡å™¨ï¼Œå¹¶ä¸”åœ¨æŸä¸€ä¸ªä¸»æœºå’Œç«¯å£ä¸Šç›‘å¬ç½‘ç»œè¯·æ±‚ï¼š</p><ul><li>ä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬é€šè¿‡ <code>ip:port</code>çš„æ–¹å¼å‘é€åˆ°æˆ‘ä»¬ç›‘å¬çš„WebæœåŠ¡å™¨ä¸Šæ—¶ï¼›</li><li>æˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶è¿›è¡Œç›¸å…³çš„å¤„ç†ï¼›</li></ul><p><code>listen</code>å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li><p>ç«¯å£port: å¯ä»¥ä¸ä¼ , ç³»ç»Ÿä¼šé»˜è®¤åˆ†é…ç«¯, åç»­é¡¹ç›®ä¸­æˆ‘ä»¬ä¼šå†™å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼›</p></li><li><p>ä¸»æœºhost: é€šå¸¸å¯ä»¥ä¼ å…¥localhostã€ipåœ°å€127.0.0.1ã€æˆ–è€…ipåœ°å€0.0.0.0ï¼Œé»˜è®¤æ˜¯0.0.0.0ï¼›</p></li><li><ul><li>ç›‘å¬IPV4ä¸Šæ‰€æœ‰çš„åœ°å€ï¼Œå†æ ¹æ®ç«¯å£æ‰¾åˆ°ä¸åŒçš„åº”ç”¨ç¨‹åºï¼›</li></ul></li><li><p>æ¯”å¦‚æˆ‘ä»¬ç›‘å¬ <code>0.0.0.0</code>æ—¶ï¼Œåœ¨åŒä¸€ä¸ªç½‘æ®µä¸‹çš„ä¸»æœºä¸­ï¼Œé€šè¿‡ipåœ°å€æ˜¯å¯ä»¥è®¿é—®çš„ï¼›</p></li><li><p>æ­£å¸¸çš„æ•°æ®åº“åŒ…ç»å¸¸ åº”ç”¨å±‚ - ä¼ è¾“å±‚ - ç½‘ç»œå±‚ - æ•°æ®é“¾è·¯å±‚ - ç‰©ç†å±‚ ï¼›</p></li><li><p>è€Œå›ç¯åœ°å€ï¼Œæ˜¯åœ¨ç½‘ç»œå±‚ç›´æ¥å°±è¢«è·å–åˆ°äº†ï¼Œæ˜¯ä¸ä¼šç»å¸¸æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚çš„ï¼›</p></li><li><p>æ¯”å¦‚æˆ‘ä»¬ç›‘å¬ <code>127.0.0.1</code>æ—¶ï¼Œåœ¨åŒä¸€ä¸ªç½‘æ®µä¸‹çš„ä¸»æœºä¸­ï¼Œé€šè¿‡ipåœ°å€æ˜¯ä¸èƒ½è®¿é—®çš„ï¼›</p></li><li><p>localhostï¼šæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸŸåï¼Œé€šå¸¸æƒ…å†µä¸‹ä¼šè¢«è§£ææˆ127.0.0.1ï¼›</p></li><li><p>127.0.0.1ï¼šå›ç¯åœ°å€ï¼ˆLoop Back Addressï¼‰ï¼Œè¡¨è¾¾çš„æ„æ€å…¶å®æ˜¯æˆ‘ä»¬ä¸»æœºè‡ªå·±å‘å‡ºå»çš„åŒ…ï¼Œç›´æ¥è¢«è‡ªå·±æ¥æ”¶ï¼›</p></li><li><p>0.0.0.0ï¼š</p></li><li><p>å›è°ƒå‡½æ•°ï¼šæœåŠ¡å™¨å¯åŠ¨æˆåŠŸæ—¶çš„å›è°ƒå‡½æ•°ï¼›</p></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>server.listen(() =&gt; {</span></span>
<span class="line"><span>  console.log(&quot;æœåŠ¡å™¨å¯åŠ¨~ğŸš€&quot;);</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-requestè¯·æ±‚å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_1-2-requestè¯·æ±‚å¯¹è±¡"><span>1.2. requestè¯·æ±‚å¯¹è±¡</span></a></h3><p>åœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬ä¼šæºå¸¦å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š</p><ul><li>æœ¬æ¬¡è¯·æ±‚çš„URLï¼ŒæœåŠ¡å™¨éœ€è¦æ ¹æ®ä¸åŒçš„URLè¿›è¡Œä¸åŒçš„å¤„ç†ï¼›</li><li>æœ¬æ¬¡è¯·æ±‚çš„è¯·æ±‚æ–¹å¼ï¼Œæ¯”å¦‚GETã€POSTè¯·æ±‚ä¼ å…¥çš„å‚æ•°å’Œå¤„ç†çš„æ–¹å¼æ˜¯ä¸åŒçš„ï¼›</li><li>æœ¬æ¬¡è¯·æ±‚çš„headersä¸­ä¹Ÿä¼šæºå¸¦ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯ä¿¡æ¯ã€æ¥å—æ•°æ®çš„æ ¼å¼ã€æ”¯æŒçš„ç¼–ç æ ¼å¼ç­‰ï¼›</li><li>ç­‰ç­‰...</li></ul><p>è¿™äº›ä¿¡æ¯ï¼ŒNodeä¼šå¸®åŠ©æˆ‘ä»¬å°è£…åˆ°ä¸€ä¸ªrequestçš„å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥å¤„ç†è¿™ä¸ªrequestå¯¹è±¡ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const server = http.createServer((req, res) =&gt; {</span></span>
<span class="line"><span>  // requestå¯¹è±¡</span></span>
<span class="line"><span>  console.log(req.url);</span></span>
<span class="line"><span>  console.log(req.method);</span></span>
<span class="line"><span>  console.log(req.headers);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  res.end(&quot;Hello World&quot;);</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-1-urlçš„å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_1-2-1-urlçš„å¤„ç†"><span>1.2.1. URLçš„å¤„ç†</span></a></h4><p>å®¢æˆ·ç«¯åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œä¼šè¯·æ±‚ä¸åŒçš„æ•°æ®ï¼Œé‚£ä¹ˆä¼šä¼ å…¥ä¸åŒçš„è¯·æ±‚åœ°å€ï¼š</p><ul><li>æ¯”å¦‚ <code>http://localhost:8000/login</code>ï¼›</li><li>æ¯”å¦‚ <code>http://localhost:8000/products</code>;</li></ul><p>æœåŠ¡å™¨ç«¯éœ€è¦æ ¹æ®ä¸åŒçš„è¯·æ±‚åœ°å€ï¼Œä½œå‡ºä¸åŒçš„å“åº”ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const server = http.createServer((req, res) =&gt; {</span></span>
<span class="line"><span>  const url = req.url;</span></span>
<span class="line"><span>  console.log(url);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  if (url === &#39;/login&#39;) {</span></span>
<span class="line"><span>    res.end(&quot;welcome Back~&quot;);</span></span>
<span class="line"><span>  } else if (url === &#39;/products&#39;) {</span></span>
<span class="line"><span>    res.end(&quot;products&quot;);</span></span>
<span class="line"><span>  } else {</span></span>
<span class="line"><span>    res.end(&quot;error message&quot;);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆå¦‚æœç”¨æˆ·å‘é€çš„åœ°å€ä¸­è¿˜æºå¸¦ä¸€äº›é¢å¤–çš„å‚æ•°å‘¢ï¼Ÿ</p><ul><li><code>http://localhost:8000/login?name=why&amp;password=123</code>;</li><li>è¿™ä¸ªæ—¶å€™ï¼Œurlçš„å€¼æ˜¯ <code>/login?name=why&amp;password=123</code>ï¼›</li></ul><p>æˆ‘ä»¬å¦‚ä½•å¯¹å®ƒè¿›è¡Œè§£æå‘¢ï¼Ÿ</p><ul><li>ä½¿ç”¨å†…ç½®æ¨¡å—urlï¼›</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const url = require(&#39;url&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// è§£æè¯·æ±‚</span></span>
<span class="line"><span>const parseInfo = url.parse(req.url);</span></span>
<span class="line"><span>console.log(parseInfo);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£æç»“æœï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>Url {</span></span>
<span class="line"><span>  protocol: null,</span></span>
<span class="line"><span>  slashes: null,</span></span>
<span class="line"><span>  auth: null,</span></span>
<span class="line"><span>  host: null,</span></span>
<span class="line"><span>  port: null,</span></span>
<span class="line"><span>  hostname: null,</span></span>
<span class="line"><span>  hash: null,</span></span>
<span class="line"><span>  search: &#39;?name=why&amp;password=123&#39;,</span></span>
<span class="line"><span>  query: &#39;name=why&amp;password=123&#39;,</span></span>
<span class="line"><span>  pathname: &#39;/login&#39;,</span></span>
<span class="line"><span>  path: &#39;/login?name=why&amp;password=123&#39;,</span></span>
<span class="line"><span>  href: &#39;/login?name=why&amp;password=123&#39;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä¼šå‘ç° <code>pathname</code>å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</p><p>ä½†æ˜¯ <code>query</code> ä¿¡æ¯å¦‚ä½•å¯ä»¥è·å–å‘¢ï¼Ÿ</p><ul><li>æ–¹å¼ä¸€ï¼šæˆªå–å­—ç¬¦ä¸²ï¼›</li><li>æ–¹å¼äºŒï¼šä½¿ç”¨querystringå†…ç½®æ¨¡å—ï¼›</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const { pathname, query } = url.parse(req.url);</span></span>
<span class="line"><span>const queryObj = qs.parse(query);</span></span>
<span class="line"><span>console.log(queryObj.name);</span></span>
<span class="line"><span>console.log(queryObj.password);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-2-methodçš„å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_1-2-2-methodçš„å¤„ç†"><span>1.2.2. Methodçš„å¤„ç†</span></a></h4><p>åœ¨Restfulè§„èŒƒï¼ˆè®¾è®¡é£æ ¼ï¼‰ä¸­ï¼Œæˆ‘ä»¬å¯¹äºæ•°æ®çš„å¢åˆ æ”¹æŸ¥åº”è¯¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼ï¼š</p><ul><li>GETï¼šæŸ¥è¯¢æ•°æ®ï¼›</li><li>POSTï¼šæ–°å»ºæ•°æ®ï¼›</li><li>PATCHï¼šæ›´æ–°æ•°æ®ï¼›</li><li>DELETEï¼šåˆ é™¤æ•°æ®ï¼›</li></ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­ä¸åŒçš„è¯·æ±‚æ–¹å¼è¿›è¡Œä¸åŒçš„å¤„ç†ã€‚</p><p>æ¯”å¦‚åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼š</p><ul><li>è¯·æ±‚æ¥å£ä¸º <code>/users</code>ï¼›</li><li>è¯·æ±‚æ–¹å¼ä¸º <code>POST</code>è¯·æ±‚ï¼›</li><li>æºå¸¦æ•°æ® <code>username</code>å’Œ<code>password</code>ï¼›</li></ul><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYIR7ichuI44mbZLhDTDgrc8qLB2tvOBBicPRHmnIX5iazgYQHZT2Kq8HeA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" loading="lazy">åˆ›å»ºç”¨æˆ·è¯·æ±‚</p><p>åœ¨æˆ‘ä»¬ç¨‹åºä¸­å¦‚ä½•è¿›è¡Œåˆ¤æ–­ä»¥åŠè·å–å¯¹åº”çš„æ•°æ®å‘¢ï¼Ÿ</p><ul><li>è¿™é‡Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­æ¥å£æ˜¯ <code>/users</code>ï¼Œå¹¶ä¸”è¯·æ±‚æ–¹å¼æ˜¯POSTæ–¹æ³•å»è·å–ä¼ å…¥çš„æ•°æ®ï¼›</li><li>è·å–è¿™ç§bodyæºå¸¦çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ç›‘å¬reqçš„ <code>data</code>äº‹ä»¶æ¥è·å–ï¼›</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>if (req.url.indexOf(&#39;/users&#39;) !== -1) {</span></span>
<span class="line"><span>  if (req.method === &#39;POST&#39;) {</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    // å¯ä»¥è®¾ç½®ç¼–ç ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸‹æ–¹é€šè¿‡ data.toString() è·å–å­—ç¬¦ä¸²æ ¼å¼</span></span>
<span class="line"><span>    req.setEncoding(&#39;utf-8&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    req.on(&#39;data&#39;, (data) =&gt; {</span></span>
<span class="line"><span>      const {username, password} = JSON.parse(data);</span></span>
<span class="line"><span>      console.log(username, password);</span></span>
<span class="line"><span>    });</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    res.end(&quot;create user success&quot;);</span></span>
<span class="line"><span>  } else {</span></span>
<span class="line"><span>    res.end(&quot;users list&quot;);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>} else {</span></span>
<span class="line"><span>  res.end(&quot;error message&quot;);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†JSONå­—ç¬¦ä¸²æ ¼å¼è½¬æˆå¯¹è±¡ç±»å‹ï¼Œé€šè¿‡<code>JSON.parse</code>æ–¹æ³•å³å¯ã€‚</p><h4 id="_1-2-3-headerå±æ€§" tabindex="-1"><a class="header-anchor" href="#_1-2-3-headerå±æ€§"><span>1.2.3. headerå±æ€§</span></a></h4><p>åœ¨requestå¯¹è±¡çš„headerä¸­ä¹ŸåŒ…å«å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const server = http.createServer((req, res) =&gt; {</span></span>
<span class="line"><span>  console.log(req.headers);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  res.end(&quot;Hello Header&quot;);</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµè§ˆå™¨ä¼šé»˜è®¤ä¼ é€’è¿‡æ¥ä¸€äº›ä¿¡æ¯ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>  &#39;content-type&#39;: &#39;application/json&#39;,</span></span>
<span class="line"><span>  &#39;user-agent&#39;: &#39;PostmanRuntime/7.26.5&#39;,</span></span>
<span class="line"><span>  accept: &#39;*/*&#39;,</span></span>
<span class="line"><span>  &#39;postman-token&#39;: &#39;afe4b8fe-67e3-49cc-bd6f-f61c95c4367b&#39;,</span></span>
<span class="line"><span>  host: &#39;localhost:8000&#39;,</span></span>
<span class="line"><span>  &#39;accept-encoding&#39;: &#39;gzip, deflate, br&#39;,</span></span>
<span class="line"><span>  connection: &#39;keep-alive&#39;,</span></span>
<span class="line"><span>  &#39;content-length&#39;: &#39;48&#39;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>content-type</code>æ˜¯è¿™æ¬¡è¯·æ±‚æºå¸¦çš„æ•°æ®çš„ç±»å‹ï¼š</p><ul><li><code>application/json</code>è¡¨ç¤ºæ˜¯ä¸€ä¸ªjsonç±»å‹ï¼›</li><li><code>text/plain</code>è¡¨ç¤ºæ˜¯æ–‡æœ¬ç±»å‹ï¼›</li><li><code>application/xml</code>è¡¨ç¤ºæ˜¯xmlç±»å‹ï¼›</li><li><code>multipart/form-data</code>è¡¨ç¤ºæ˜¯ä¸Šä¼ æ–‡ä»¶ï¼›</li></ul><p><code>content-length</code>ï¼š</p><ul><li>æ–‡ä»¶çš„å¤§å°å’Œé•¿åº¦</li></ul><p><code>keep-alive</code>ï¼š</p><ul><li><p>httpæ˜¯åŸºäºTCPåè®®çš„ï¼Œä½†æ˜¯é€šå¸¸åœ¨è¿›è¡Œä¸€æ¬¡è¯·æ±‚å’Œå“åº”ç»“æŸåä¼šç«‹åˆ»ä¸­æ–­ï¼›</p></li><li><p>åœ¨http1.0ä¸­ï¼Œå¦‚æœæƒ³è¦ç»§ç»­ä¿æŒè¿æ¥ï¼š</p></li><li><ul><li>æµè§ˆå™¨éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  <code>connection: keep-alive</code>ï¼›</li></ul></li><li><p>æœåŠ¡å™¨éœ€è¦åœ¨å“åº”å¤´ä¸­æ·»åŠ  <code>connection:keey-alive</code>ï¼›</p></li><li><p>å½“å®¢æˆ·ç«¯å†æ¬¡æ”¾è¯·æ±‚æ—¶ï¼Œå°±ä¼šä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ï¼Œç›´æ¥ä¸€æ–¹ä¸­æ–­è¿æ¥ï¼›</p></li><li><p>åœ¨http1.1ä¸­ï¼Œæ‰€æœ‰è¿æ¥é»˜è®¤æ˜¯ <code>connection: keep-alive</code>çš„ï¼›</p></li><li><ul><li>ä¸åŒçš„WebæœåŠ¡å™¨ä¼šæœ‰ä¸åŒçš„ä¿æŒ <code>keep-alive</code>çš„æ—¶é—´ï¼›</li></ul></li><li><p>Nodeä¸­é»˜è®¤æ˜¯5sä¸­ï¼›</p></li></ul><p><code>accept-encoding</code>ï¼š</p><ul><li>å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯æ”¯æŒçš„æ–‡ä»¶å‹ç¼©æ ¼å¼ï¼Œæ¯”å¦‚jsæ–‡ä»¶å¯ä»¥ä½¿ç”¨gzipç¼–ç ï¼Œå¯¹åº” <code>.gz</code>æ–‡ä»¶ï¼›</li></ul><p><code>accept</code>ï¼š</p><ul><li>å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å¯æ¥å—æ–‡ä»¶çš„æ ¼å¼ç±»å‹ï¼›</li></ul><p><code>user-agent</code>ï¼š</p><ul><li>å®¢æˆ·ç«¯ç›¸å…³çš„ä¿¡æ¯ï¼›</li></ul><h3 id="_1-3-å“åº”å¯¹è±¡response" tabindex="-1"><a class="header-anchor" href="#_1-3-å“åº”å¯¹è±¡response"><span>1.3. å“åº”å¯¹è±¡response</span></a></h3><h4 id="_1-3-1-è¿”å›å“åº”ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_1-3-1-è¿”å›å“åº”ç»“æœ"><span>1.3.1. è¿”å›å“åº”ç»“æœ</span></a></h4><p>å¦‚æœæˆ‘ä»¬å¸Œæœ›ç»™å®¢æˆ·ç«¯å“åº”çš„ç»“æœæ•°æ®ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>Writeæ–¹æ³•ï¼šè¿™ç§æ–¹å¼æ˜¯ç›´æ¥å†™å‡ºæ•°æ®ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å…³é—­æµï¼›</li><li>endæ–¹æ³•ï¼šè¿™ç§æ–¹å¼æ˜¯å†™å‡ºæœ€åçš„æ•°æ®ï¼Œå¹¶ä¸”å†™å‡ºåä¼šå…³é—­æµï¼›</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const http = require(&#39;http&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const server = http.createServer((req, res) =&gt; {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // å“åº”æ•°æ®çš„æ–¹å¼æœ‰ä¸¤ä¸ª:</span></span>
<span class="line"><span>  res.write(&quot;Hello World&quot;);</span></span>
<span class="line"><span>  res.write(&quot;Hello Response&quot;);</span></span>
<span class="line"><span>  res.end(&quot;message end&quot;);</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span></span></span>
<span class="line"><span>server.listen(8000, () =&gt; {</span></span>
<span class="line"><span>  console.log(&quot;æœåŠ¡å™¨å¯åŠ¨ğŸš€~&quot;)</span></span>
<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰è°ƒç”¨ <code>end</code>å’Œ<code>close</code>ï¼Œå®¢æˆ·ç«¯å°†ä¼šä¸€ç›´ç­‰å¾…ç»“æœï¼Œæ‰€ä»¥å®¢æˆ·ç«¯åœ¨å‘é€ç½‘ç»œè¯·æ±‚æ—¶ï¼Œéƒ½ä¼šè®¾ç½®è¶…æ—¶æ—¶é—´ã€‚</p><h4 id="_1-3-2-è¿”å›çŠ¶æ€ç " tabindex="-1"><a class="header-anchor" href="#_1-3-2-è¿”å›çŠ¶æ€ç "><span>1.3.2. è¿”å›çŠ¶æ€ç </span></a></h4><p>HttpçŠ¶æ€ç ï¼ˆHttp Status Codeï¼‰æ˜¯ç”¨æ¥è¡¨ç¤ºHttpå“åº”çŠ¶æ€çš„æ•°å­—ä»£ç ï¼š</p><ul><li>HttpçŠ¶æ€ç éå¸¸å¤šï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„æƒ…å†µï¼Œç»™å®¢æˆ·ç«¯è¿”å›ä¸åŒçš„çŠ¶æ€ç ï¼›</li><li>å¸¸è§çš„çŠ¶æ€ç æ˜¯ä¸‹é¢è¿™äº›ï¼ˆåç»­é¡¹ç›®ä¸­ï¼Œä¹Ÿä¼šç”¨åˆ°å…¶ä¸­çš„çŠ¶æ€ç ï¼‰ï¼›</li></ul><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡" loading="lazy">çŠ¶æ€ç </p><p>è®¾ç½®çŠ¶æ€ç å¸¸è§çš„æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>res.statusCode = 400;</span></span>
<span class="line"><span>res.writeHead(200);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-3-å“åº”å¤´æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-3-3-å“åº”å¤´æ–‡ä»¶"><span>1.3.3. å“åº”å¤´æ–‡ä»¶</span></a></h4><p>è¿”å›å¤´éƒ¨ä¿¡æ¯ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><code>res.setHeader</code>ï¼šä¸€æ¬¡å†™å…¥ä¸€ä¸ªå¤´éƒ¨ä¿¡æ¯ï¼›</li><li><code>res.writeHead</code>ï¼šåŒæ—¶å†™å…¥headerå’Œstatusï¼›</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>res.setHeader(&quot;Content-Type&quot;, &quot;application/json;charset=utf8&quot;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>res.writeHead(200, {</span></span>
<span class="line"><span>  &quot;Content-Type&quot;: &quot;application/json;charset=utf8&quot;</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Headerè®¾ç½® <code>Content-Type</code>æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</p><ul><li>é»˜è®¤å®¢æˆ·ç«¯æ¥æ”¶åˆ°çš„æ˜¯å­—ç¬¦ä¸²ï¼Œå®¢æˆ·ç«¯ä¼šæŒ‰ç…§è‡ªå·±é»˜è®¤çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼›</li></ul><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬è¿”å›çš„æ˜¯ä¸€æ®µHTMLï¼Œä½†æ˜¯æ²¡æœ‰æŒ‡å®šæ ¼å¼ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>res.end(&#39;&lt;h2&gt;Hello World&lt;/h2&gt;&#39;)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYhcq8kxyag70Du07GP25EmvgUP9YebEKic6MQJxbCxNsdibsib4Jf3Y3vA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" loading="lazy">image-20201030154312050</p><p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æŒ‡å®šäº†æ ¼å¼ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>res.setHeader(&quot;Content-Type&quot;, &quot;text/html;charset=utf8&quot;);</span></span>
<span class="line"><span>res.end(&#39;&lt;h2&gt;Hello World&lt;/h2&gt;&#39;)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYCc4y2GKPr3Sib3iaaUc8zliajHdxhHD78dPdRia52t5F9XfJx9WTMcnxicw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" loading="lazy">image-20201030154404172</p><p>å¦‚æœæˆ‘ä»¬å¸Œæœ›è¿”å›ä¸€æ®µJSONæ•°æ®ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>res.writeHead(200, {</span></span>
<span class="line"><span>  &quot;Content-Type&quot;: &quot;application/json;charset=utf8&quot;</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const data = {</span></span>
<span class="line"><span>  name: &quot;ç‹çº¢å…ƒ&quot;,</span></span>
<span class="line"><span>  age: 18,</span></span>
<span class="line"><span>  height: 1.88</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>res.end(JSON.stringify(data));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äºŒ-webå…¶ä»–è¡¥å……" tabindex="-1"><a class="header-anchor" href="#äºŒ-webå…¶ä»–è¡¥å……"><span>äºŒ. Webå…¶ä»–è¡¥å……</span></a></h2><h3 id="_2-1-æ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-1-æ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨"><span>2.1. æ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨</span></a></h3><p>å¦‚æœæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ–‡ä»¶éœ€è¦ä¸Šä¼ åˆ°æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯è¿›è¡Œä¿å­˜åº”è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;/upload&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">method</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;POST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fileWriter</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;./foo.png&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">fileWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fileSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">headers</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;content-length&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">      let</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> curSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">fileSize</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        curSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">curSize</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">\`æ–‡ä»¶ä¸Šä¼ è¿›åº¦: </span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">curSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">fileSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;end&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æ–‡ä»¶ä¸Šä¼ å®Œæˆ~&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å‘ç°æ–‡ä»¶ä¸Šä¼ æˆåŠŸäº†ï¼Œä½†æ˜¯æ–‡ä»¶å´æ‰“ä¸å¼€ï¼š</p><ul><li>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å†™å…¥çš„æ•°æ®ï¼Œé‡Œé¢åŒ…å«ä¸€äº›ç‰¹æ®Šçš„ä¿¡æ¯ï¼›</li><li>è¿™äº›ä¿¡æ¯æ‰“å¼€çš„è½¯ä»¶å¹¶ä¸èƒ½å¾ˆå¥½çš„è§£æï¼›</li></ul><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;/upload&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">method</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;POST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      // å›¾ç‰‡æ–‡ä»¶å¿…é¡»è®¾ç½®ä¸ºäºŒè¿›åˆ¶çš„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setEncoding</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;binary&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      // è·å–content-typeä¸­çš„boundaryçš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">      var</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> boundary</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">headers</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;content-type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;; &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;boundary=&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      // è®°å½•å½“å‰æ•°æ®çš„ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fileSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">headers</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;content-length&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">      let</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> curSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">      let</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      // ç›‘å¬å½“å‰çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        curSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">\`æ–‡ä»¶ä¸Šä¼ è¿›åº¦: </span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">curSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">fileSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        body</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      // æ•°æ®ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;end&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // åˆ‡å‰²æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> payload</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> qs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\r\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // è·å–æœ€åçš„ç±»å‹(image/png)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fileType</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> payload</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // è·å–è¦æˆªå–çš„é•¿åº¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fileTypePosition</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> body</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">fileType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> fileType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> binaryData</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> body</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">fileTypePosition</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        binaryData</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> binaryData</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">\\s\\s</span><span style="--shiki-light:#D73A49;--shiki-dark:#D19A66;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#E06C75;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        // binaryData = binaryData.replaceAll(&#39;\\r\\n&#39;, &#39;&#39;);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> finalData</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> binaryData</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">binaryData</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;--&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">boundary</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;--&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeFile</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;./boo.png&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">finalData</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;binary&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">          console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">          res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æ–‡ä»¶ä¸Šä¼ å®Œæˆ~&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-httpå‘é€ç½‘ç»œè¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#_2-2-httpå‘é€ç½‘ç»œè¯·æ±‚"><span>2.2. httpå‘é€ç½‘ç»œè¯·æ±‚</span></a></h3><p>axiosåº“å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨Nodeä¸­ä½¿ç”¨ï¼š</p><ul><li>åœ¨æµè§ˆå™¨ä¸­ï¼Œaxiosä½¿ç”¨çš„æ˜¯å°è£…xhrï¼›</li><li>åœ¨Nodeä¸­ï¼Œä½¿ç”¨çš„æ˜¯httpå†…ç½®æ¨¡å—ï¼›</li></ul><p>æ‰€ä»¥httpæ¨¡å—æ˜¯å¯ä»¥åœ¨Nodeä¸­ç›´æ¥å‘é€ç½‘ç»œè¯·æ±‚çš„ã€‚</p><p>å‘é€getè¯·æ±‚ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http://localhost:8000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘é€postè¯·æ±‚ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> req</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  method</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;POST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;localhost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,113),p=[e];function h(t,k){return a(),i("div",null,p)}const c=s(l,[["render",h],["__file","NodeåŸºç¡€ä¹.html.vue"]]),g=JSON.parse('{"path":"/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%B9%9D.html","title":"NodeåŸºç¡€ä¹","lang":"zh-CN","frontmatter":{"title":"NodeåŸºç¡€ä¹","date":"2022-10-01T12:29:50.000Z","categories":"Node","tags":"Node NodeåŸºç¡€ç³»åˆ—","pre":"NodeåŸºç¡€å…«","next":"NodeåŸºç¡€å","description":"ä¹.httpå¼€å‘webæœåŠ¡å™¨ ä»€ä¹ˆæ˜¯WebæœåŠ¡å™¨ï¼Ÿ å½“åº”ç”¨ç¨‹åºï¼ˆå®¢æˆ·ç«¯ï¼‰éœ€è¦æŸä¸€ä¸ªèµ„æºæ—¶ï¼Œå¯ä»¥å‘ä¸€ä¸ªå°æœåŠ¡å™¨ï¼Œé€šè¿‡Httpè¯·æ±‚è·å–åˆ°è¿™ä¸ªèµ„æºï¼›æä¾›æœåŠ¡å™¨çš„è¿™ä¸ªæœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨ï¼› å›¾ç‰‡WebæœåŠ¡å™¨ ç›®å‰æœ‰å¾ˆå¤šå¼€æºçš„WebæœåŠ¡å™¨ï¼šNginxã€Apacheï¼ˆé™æ€ï¼‰ã€Apache Tomcatï¼ˆé™æ€ã€åŠ¨æ€ï¼‰ã€Node.js ä¸€. Httpæ¨¡æ¿åŸºæœ¬ä½¿...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%B9%9D.html"}],["meta",{"property":"og:site_name","content":"åšå®¢"}],["meta",{"property":"og:title","content":"NodeåŸºç¡€ä¹"}],["meta",{"property":"og:description","content":"ä¹.httpå¼€å‘webæœåŠ¡å™¨ ä»€ä¹ˆæ˜¯WebæœåŠ¡å™¨ï¼Ÿ å½“åº”ç”¨ç¨‹åºï¼ˆå®¢æˆ·ç«¯ï¼‰éœ€è¦æŸä¸€ä¸ªèµ„æºæ—¶ï¼Œå¯ä»¥å‘ä¸€ä¸ªå°æœåŠ¡å™¨ï¼Œé€šè¿‡Httpè¯·æ±‚è·å–åˆ°è¿™ä¸ªèµ„æºï¼›æä¾›æœåŠ¡å™¨çš„è¿™ä¸ªæœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨ï¼› å›¾ç‰‡WebæœåŠ¡å™¨ ç›®å‰æœ‰å¾ˆå¤šå¼€æºçš„WebæœåŠ¡å™¨ï¼šNginxã€Apacheï¼ˆé™æ€ï¼‰ã€Apache Tomcatï¼ˆé™æ€ã€åŠ¨æ€ï¼‰ã€Node.js ä¸€. Httpæ¨¡æ¿åŸºæœ¬ä½¿..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYZYwgaPR9na9Lym9T8nLzn8aiazAgKTX01Vh9MBr7aEohYhaV4THKdeg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-19T08:58:34.000Z"}],["meta",{"property":"article:author","content":"chriswoodcn"}],["meta",{"property":"article:published_time","content":"2022-10-01T12:29:50.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-19T08:58:34.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"NodeåŸºç¡€ä¹\\",\\"image\\":[\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYZYwgaPR9na9Lym9T8nLzn8aiazAgKTX01Vh9MBr7aEohYhaV4THKdeg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYIR7ichuI44mbZLhDTDgrc8qLB2tvOBBicPRHmnIX5iazgYQHZT2Kq8HeA/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYhcq8kxyag70Du07GP25EmvgUP9YebEKic6MQJxbCxNsdibsib4Jf3Y3vA/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYCc4y2GKPr3Sib3iaaUc8zliajHdxhHD78dPdRia52t5F9XfJx9WTMcnxicw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\"],\\"datePublished\\":\\"2022-10-01T12:29:50.000Z\\",\\"dateModified\\":\\"2024-06-19T08:58:34.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"chriswoodcn\\"}]}"]]},"headers":[{"level":2,"title":"ä¹.httpå¼€å‘webæœåŠ¡å™¨","slug":"ä¹-httpå¼€å‘webæœåŠ¡å™¨","link":"#ä¹-httpå¼€å‘webæœåŠ¡å™¨","children":[]},{"level":2,"title":"ä¸€. Httpæ¨¡æ¿åŸºæœ¬ä½¿ç”¨","slug":"ä¸€-httpæ¨¡æ¿åŸºæœ¬ä½¿ç”¨","link":"#ä¸€-httpæ¨¡æ¿åŸºæœ¬ä½¿ç”¨","children":[{"level":3,"title":"1.1. å¦‚ä½•åˆ›å»ºæœåŠ¡","slug":"_1-1-å¦‚ä½•åˆ›å»ºæœåŠ¡","link":"#_1-1-å¦‚ä½•åˆ›å»ºæœåŠ¡","children":[]},{"level":3,"title":"1.2. requestè¯·æ±‚å¯¹è±¡","slug":"_1-2-requestè¯·æ±‚å¯¹è±¡","link":"#_1-2-requestè¯·æ±‚å¯¹è±¡","children":[]},{"level":3,"title":"1.3. å“åº”å¯¹è±¡response","slug":"_1-3-å“åº”å¯¹è±¡response","link":"#_1-3-å“åº”å¯¹è±¡response","children":[]}]},{"level":2,"title":"äºŒ. Webå…¶ä»–è¡¥å……","slug":"äºŒ-webå…¶ä»–è¡¥å……","link":"#äºŒ-webå…¶ä»–è¡¥å……","children":[{"level":3,"title":"2.1. æ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨","slug":"_2-1-æ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨","link":"#_2-1-æ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨","children":[]},{"level":3,"title":"2.2. httpå‘é€ç½‘ç»œè¯·æ±‚","slug":"_2-2-httpå‘é€ç½‘ç»œè¯·æ±‚","link":"#_2-2-httpå‘é€ç½‘ç»œè¯·æ±‚","children":[]}]}],"git":{"createdTime":1718787514000,"updatedTime":1718787514000,"contributors":[{"name":"chriswoodcn","email":"chriswoodcn@aliyun.com","commits":1}]},"readingTime":{"minutes":9.13,"words":2738},"filePathRelative":"zh/posts/node/base/NodeåŸºç¡€ä¹.md","localizedDate":"2022å¹´10æœˆ1æ—¥","excerpt":"<h2>ä¹.httpå¼€å‘webæœåŠ¡å™¨</h2>\\n<blockquote>\\n<p>ä»€ä¹ˆæ˜¯WebæœåŠ¡å™¨ï¼Ÿ</p>\\n<p>å½“åº”ç”¨ç¨‹åºï¼ˆå®¢æˆ·ç«¯ï¼‰éœ€è¦æŸä¸€ä¸ªèµ„æºæ—¶ï¼Œå¯ä»¥å‘ä¸€ä¸ªå°æœåŠ¡å™¨ï¼Œé€šè¿‡Httpè¯·æ±‚è·å–åˆ°è¿™ä¸ªèµ„æºï¼›æä¾›æœåŠ¡å™¨çš„è¿™ä¸ªæœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªWebæœåŠ¡å™¨ï¼›</p>\\n</blockquote>\\n<p><img src=\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvfXvFoaXOVJ29jk0SkBGbYZYwgaPR9na9Lym9T8nLzn8aiazAgKTX01Vh9MBr7aEohYhaV4THKdeg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1\\" alt=\\"å›¾ç‰‡\\" loading=\\"lazy\\">WebæœåŠ¡å™¨</p>","autoDesc":true}');export{c as comp,g as data};
