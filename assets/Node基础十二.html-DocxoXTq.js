import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,o as a,b as e}from"./app-DZw5DSeQ.js";const n={},l=e('<h2 id="十二-数据库mysql" tabindex="-1"><a class="header-anchor" href="#十二-数据库mysql"><span>十二.数据库MySQL</span></a></h2><h2 id="认识数据库" tabindex="-1"><a class="header-anchor" href="#认识数据库"><span>认识数据库</span></a></h2><h3 id="_1-1-为什么要使用数据库" tabindex="-1"><a class="header-anchor" href="#_1-1-为什么要使用数据库"><span>1.1. 为什么要使用数据库</span></a></h3><p>任何的软件系统都需要存放大量的数据，这些数据通常是非常复杂和庞大的：</p><ul><li>比如用户信息包括姓名、年龄、性别、地址、身份证号、出生日期等等；</li><li>比如商品信息包括商品的名称、描述、价格（原价）、分类标签、商品图片等等；</li><li>比如歌曲信息包括歌曲的名称、歌手、专辑、歌曲时长、歌词信息、封面图片等等；</li></ul><p>那么这些信息不能直接存储到文件中吗？可以，但是文件系统有很多的缺点：</p><ul><li>很难以合适的方式组织数据（多张表之前的关系合理组织）；</li><li>并且对数据进行增删改查中的复杂操作（虽然一些简单确实可以），并且保证单操作的原子性；</li><li>很难进行数据共享，比如一个数据库需要为多个程序服务，如何进行很好的数据共享；</li><li>需要考虑如何进行数据的高效备份、迁移、恢复；</li><li>等等...</li></ul><p>数据库通俗来讲就是一个存储数据的仓库，数据库本质上就是一个软件、一个程序。</p><h3 id="_1-2-常见的数据库有哪些" tabindex="-1"><a class="header-anchor" href="#_1-2-常见的数据库有哪些"><span>1.2. 常见的数据库有哪些？</span></a></h3><p>通常我们将数据划分成两类：</p><ul><li><p>关系型数据库：MySQL、Oracle、DB2、SQL Server、Postgre SQL等；</p></li><li><ul><li>关系型数据库通常我们会创建很多个二维数据表；</li></ul></li><li><p>数据表之间相互关联起来，形成一对一、一对多、多对对等关系；</p></li><li><p>之后可以利用SQL语句在多张表中查询我们所需的数据；</p></li><li><p>支持事物，对数据的访问更加的安全；</p></li><li><p>非关系型数据库：MongoDB、Redis、Memcached、HBse等；</p></li><li><ul><li>非关系型数据库的英文其实是Not only SQL，也简称为NoSQL；</li></ul></li><li><p>相当而已非关系型数据库比较简单一些，存储数据也会更加自由（甚至我们可以直接将一个复杂的json对象直接塞入到数据库中）；</p></li><li><p>NoSQL是基于Key-Value的对应关系，并且查询的过程中不需要经过SQL解析，所以性能更高；</p></li><li><p>NoSQL通常不支持事物，需要在自己的程序中来保证一些原子性的操作；</p></li></ul><p>如何在开发中选择他们呢？具体的选择会根据不同的项目进行综合的分析，我这里给一点点建议：</p><ul><li>目前在公司进行后端开发（Node、Java、Go等），还是以关系型数据库为主；</li><li>比较常用的用到非关系型数据库的，在爬取大量的数据进行存储时，会比较常见；</li></ul><p>我们的课程是开发自己的后端项目，所以我们以关系型数据库MySQL作为主要内容。</p><p>MySQL的介绍：</p><ul><li>MySQL原本是一个开源的数据库，原开发者为瑞典的MySQL AB公司；</li><li>在2008年被Sun公司收购；在2009年，Sun被Oracle收购；</li><li>所以目前MySQL归属于Oracle；</li></ul><p>MySQL是一个关系型数据库，其实本质上就是一款软件、一个程序：</p><ul><li>这个程序中管理着多个数据库；</li><li>每个数据库中可以有多张表；</li><li>每个表中可以有多条数据；</li></ul><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">关系型数据库</p><h3 id="_1-3-mysql的下载和安装" tabindex="-1"><a class="header-anchor" href="#_1-3-mysql的下载和安装"><span>1.3. MySQL的下载和安装</span></a></h3><p><strong>第一步：下载MySQL软件</strong></p><p>下载地址：https://dev.mysql.com/downloads/mysql/</p><ul><li><p>根据自己的操作系统下载即可；</p></li><li><p>推荐大家直接下载安装版本，在安装过程中会配置一些环境变量；</p></li><li><ul><li>Windows推荐下载MSI的版本；</li></ul></li><li><p>Mac推荐下载DMG的版本；</p></li><li><p>这里我安装的是MySQL最新的版本：8.0.22（不再使用旧的MySQL5.x的版本）</p></li></ul><p>Windows：</p><ul><li>下载下面的，不需要联网安装；</li></ul><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62FK0yMcWgEBjqqcvNQE5dXHvHJ2Irqsics0HJLU1QHsIdtic2q87jicGIw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">Windows下载的版本</p><p>Mac：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62icJylNSAM4bk5mZwvSBouI8ymB3xCjQI2OdeE8HPVkAhArR3hIwibc7A/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">Mac下载的版本</p><p><strong>第二步：安装的过程</strong></p><p>安装的过程，基本没有太复杂的操作。</p><p>有一个需要着重说明的是MySQL8，可以采用一种更新的、安全性更高的密码和加密方式：</p><ul><li>最新的加密方式有可能会被一些比较老的软件驱动不支持；</li><li>所以要根据情况来选择，但是我这里选择最新的加密方式了；</li></ul><p>Windows的安装过程：</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">Server Only</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">执行</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62CRsYribbzFicIFszSG6EWIJiaiayqDpFkbSyXZbuJUlCQe22MK6oOLXarg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">安装一个依赖</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62z39u8qonz5WsGdiaqCQWOf9Y3svcK3ysuzGQz2CUJbdrcoSAZKBKKzw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">下一步</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62k70qPjhYoV4dibEO1AxRRO4qNq9HiavCaTqaCLtHOcdJ3zbbnPEUibCEg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">配置端口号</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">选择密码加密方式</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">填写一个复杂的密码</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62IWLbUU0kLq8ibkEUHSBFSic3c0eTvDvibq6dZoATVQZzohwPlGozUTuKw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">配置服务的名称</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62IvjRm4cLgZbjg3WicrX1DgwMZqDibXjrjpnJA2rrBZ7Uva1ASmrzIm3A/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">应用所有配置</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62fia8L5CT6VjzDPiaRMicezlibbuv0ycFiaIK0egfGXI8iccicPEIbQw1oau3Q/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">完成即可</p><p><strong>第三步：启动mysql</strong></p><p>在Windows启动MySQL：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict622uZ9FyrnvFxMAPrYKJ0AhZtdIIHwHJ8EYyoIVFqDCrzVO9hwjqCoMw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">image-20201109171443817</p><p>在Mac中启动MySQL是在系统偏好设置中：</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">Mac启动MySQL</p><h3 id="_1-4-mysql的连接和操作" tabindex="-1"><a class="header-anchor" href="#_1-4-mysql的连接和操作"><span>1.4. mysql的连接和操作</span></a></h3><p>打开终端，查看MySQL的安装：</p><ul><li>这里会显示找不到命令；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mysql --version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在Windows上配置环境变量：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62OrAGbqEib5b6dicGia0rdC6KRFWSTgiciaLIoHXJJIzlxRr82ACWib0KntjA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">Windows上配置环境变量</p><p>在Mac上配置环境变量：</p><p>手动执行下面的终端命令，将MySQL配置到环境变量中：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 添加环境变量</span></span>\n<span class="line"><span>export PATH=$PATH:/usr/local/mysql/bin</span></span>\n<span class="line"><span># 再次执行mysql版本</span></span>\n<span class="line"><span>mysql --version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-4-1-终端连接数据库" tabindex="-1"><a class="header-anchor" href="#_1-4-1-终端连接数据库"><span>1.4.1. 终端连接数据库</span></a></h4><p>我们如果想要操作数据，需要先和数据建立一个连接，最直接的方式就是通过终端来连接；</p><p>有两种方式来连接：</p><ul><li>两种方式的区别在于输入密码是直接输入，还是另起一行以密文的形式输入；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 方式一：</span></span>\n<span class="line"><span>mysql -uroot -pCoderwhy888.</span></span>\n<span class="line"><span># 方式二：</span></span>\n<span class="line"><span>mysql -uroot -p</span></span>\n<span class="line"><span>Enter password: your password</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输入成功后，会进入到mysql的REPL（交互式的编程环境）：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62JnpyIGr4tx2hay6FP42FClFbpuWbG8UI6Og3s3wS2ouVa0u0YGAtkg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">MySQL的REPL</p><p>我们可以直接在REPL中对数据库进行操作。</p><h4 id="_1-4-2-终端操作数据库" tabindex="-1"><a class="header-anchor" href="#_1-4-2-终端操作数据库"><span>1.4.2. 终端操作数据库</span></a></h4><p>我们说过，一个数据库软件中，可以包含很多个数据库：</p><ul><li>infomation_schema：信息数据库，其中包括MySQL在维护的其他数据库、表、列、访问权限等信息；</li><li>performance_schema：性能数据库，记录着MySQL Server数据库引擎在运行过程中的一些资源消耗相关的信息；</li><li>mysql：用于存储数据库管理者的用户信息、权限信息以及一些日志信息等；</li><li>sys：相当于是一个简易版的performance_schema，将数据汇总成更容易理解的形式；</li></ul><p>注意：这里我只是在终端简单演练数据库，并没有详细讲解每一个命令，也没有完全按照SQL格式规范；</p><ul><li>这些在后面会详细讲解的；</li></ul><p>查看所有的数据库：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>show databases;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">image-20201108165132702</p><p>在终端直接创建一个属于自己的新的数据库coderhub（一般情况下一个新的项目会对应一个新的数据库）。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>create database coderhub;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">创建一个数据库</p><p>使用我们创建的数据库coderhub：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>use coderhub;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在数据库中创建自己的表：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>create table user(</span></span>\n<span class="line"><span>	name varchar(20),</span></span>\n<span class="line"><span>	age int,</span></span>\n<span class="line"><span>	height double</span></span>\n<span class="line"><span>);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62EVFibib0GWnial4mhuOACqkFyAX2thes0m5s8g0rrBy2QuOSdUN7ibWG7g/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">创建用户表</p><p>在user表中插入自己的数据：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>insert into user (name, age, height) values (&#39;why&#39;, 18, 1.88);</span></span>\n<span class="line"><span>insert into user (name, age, height) values (&#39;kobe&#39;, 40, 1.98);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62NLDWPzECzABc5ZlhoTic2awy2GSPGBMocgIpadOZWa6l9kGnbTnZCMQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">插入两条数据</p><p>查看user表中所有的数据：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>select * from user;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62HJmcEAdvA6FpMWTQER7PUkowJnlaYdmhYYZHic6I5XuhMWgHgVh2q7w/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">查询表中的数据</p><h3 id="_1-5-gui工具操作数据库" tabindex="-1"><a class="header-anchor" href="#_1-5-gui工具操作数据库"><span>1.5. GUI工具操作数据库</span></a></h3><p>我们会发现在终端操作数据库有很多不方便的地方：</p><ul><li>语句写出来没有高亮，并且不会有任何的提示；</li><li>复杂的语句分成多行，格式看起来并不美观，很冗余出现错误；</li><li>终端中查看所有的数据库或者表非常的不直观和不方便；</li><li>等等...</li></ul><p>所以在开发中，我们可以借助于一些GUI工具来帮助我们连接上数据库，之后直接在GUI工具中操作就会非常方便。</p><p>常见的MySQL的GUI工具有很多，这里推荐几款：</p><ul><li>Navicat：个人最喜欢的一款工作，但是是收费的（有免费的试用时间，或者各显神通）；</li><li>SQLYog：一款免费的SQL工具；</li><li>TablePlus：常用功能都可以使用，但是会多一些限制（比如只能开两个标签页）；</li></ul><p>这里我选择使用Navicat。</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">连接数据库</p><p>查看所有的数据库、表、表中的数据：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62MRWvtduj4pC1Yt9GvW8JSqmpWzFJJENfoHq4yicxUEz5uELrmTFjMnw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">Navicat界面</p><p>编写SQL语句，并且执行；</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62fViaNPicV44h5ictF9vpLbP0zHic620OjEibibNXnIgKMm5EAaqwg17GKZTQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">Navicat编写SQL</p><h2 id="sql语句" tabindex="-1"><a class="header-anchor" href="#sql语句"><span>SQL语句</span></a></h2><h3 id="_2-1-认识sql语句" tabindex="-1"><a class="header-anchor" href="#_2-1-认识sql语句"><span>2.1. 认识SQL语句</span></a></h3><p>我们希望操作数据库（特别是在程序中），就需要有和数据库沟通的语言，这个语言就是SQL：</p><ul><li>SQL是Structured Query Language，称之为结构化查询语言，简称SQL；</li><li>使用SQL编写出来的语句，就称之为SQL语句；</li><li>SQL语句可以用于对数据库进行操作；</li></ul><p>事实上，常见的关系型数据库SQL语句都是比较相似的，所以你学会了MySQL中的SQL语句，之后去操作比如Oracle或者其他关系型数据库，也是非常方便的。</p><p>SQL语句的常用规范：</p><ul><li>通常关键字是大写的，比如CREATE、TABLE、SHOW等等；</li><li>一条语句结束后，需要以 <code>;</code> 结尾；</li><li>如果遇到关键字作为表明或者字段名称，可以使用``包裹;</li></ul><p>常见的SQL语句我们可以分成四类：</p><ul><li><p>DDL（Data Definition Language）：数据定义语言；</p></li><li><ul><li>可以通过DDL语句对数据库或者表进行：创建、删除、修改等操作；</li></ul></li><li><p>DML（Data Manipulation Language）：数据操作语言；</p></li><li><ul><li>可以通过DML语句对表进行：添加、删除、修改等操作；</li></ul></li><li><p>DQL（Data Query Language）：数据查询语言；</p></li><li><ul><li>可以通过DQL从数据库中查询记录；（重点）</li></ul></li><li><p>DCL（Data Control Language）：数据控制语言；</p></li><li><ul><li>对数据库、表格的权限进行相关访问控制操作；</li></ul></li></ul><p>接下来我们对他们进行一个个的学习和掌握。</p><h3 id="_2-2-ddl语句" tabindex="-1"><a class="header-anchor" href="#_2-2-ddl语句"><span>2.2. DDL语句</span></a></h3><h4 id="_2-2-1-数据库的操作" tabindex="-1"><a class="header-anchor" href="#_2-2-1-数据库的操作"><span>2.2.1. 数据库的操作</span></a></h4><p><strong>查看当前的数据库：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 查看所有的数据SHOW DATABASES;# 使用某一个数据USE coderhub;# 查看当前正在使用的数据库SELECT DATABASE();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>创建新的数据：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 创建数据库语句CREATE DATABASE bilibili;CREATE DATABASE IF NOT EXISTS bilibili;CREATE DATABASE IF NOT EXISTS bilibili DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>创建数据库时，可以设置字符串和字符排序（我们可以直接使用默认的）：</p><ul><li>字符集：utf8mb4在我们需要插入emoji表情时要用到；</li><li>排序规则：ai表示不区分重音；ci表示不区分大小写；</li></ul><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">image-20201108210407214</p><p><strong>删除数据库：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 删除数据库DROP DATABASE bilibili;DROP DATABASE IF EXIT bilibili;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>修改数据库：</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 修改数据库的字符集和排序规则ALTER DATABASE bilibili CHARACTER SET = utf8 COLLATE = utf8_unicode_ci;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-2-2-数据表的操作" tabindex="-1"><a class="header-anchor" href="#_2-2-2-数据表的操作"><span>2.2.2. 数据表的操作</span></a></h4><p><strong>查看数据表</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 查看所有的数据表SHOW TABLES;# 查看某一个表结构DESC user;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>创建数据表</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>CREATE TABLE IF NOT EXISTS `users`(	name VARCHAR(20),	age INT,	height DOUBLE);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-3-创建表细节" tabindex="-1"><a class="header-anchor" href="#_2-3-创建表细节"><span>2.3. 创建表细节</span></a></h3><h4 id="_2-3-1-sql数据类型" tabindex="-1"><a class="header-anchor" href="#_2-3-1-sql数据类型"><span>2.3.1. SQL数据类型</span></a></h4><p>我们知道不同的数据会划分为不同的数据类型，在数据库中也是一样：</p><ul><li>MySQL支持的数据类型有：数字类型，日期和时间类型，字符串（字符和字节）类型，空间类型和 JSON数据类型。</li></ul><p><strong>数字类型</strong></p><p>MySQL的数字类型有很多：</p><ul><li>整数数字类型：INTEGER，INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT；</li></ul><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict621PETJZSaJgOBXKPezvLSOpynauDDn3wRookibBicQwsAQmJeIwkyY16w/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">整数类型</p><ul><li>精确数字类型：DECIMAL，NUMERIC（DECIMAL是NUMERIC的实现形式）；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>salary DECIMAL(5,2)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>浮点数字类型：FLOAT，DOUBLE</p></li><li><ul><li>FLOAT是4个字节，DOUBLE是8个字节；</li></ul></li></ul><p><strong>日期类型</strong></p><p>MySQL的日期类型也很多：</p><ul><li><p><code>YEAR</code>以*<code>YYYY</code>*格式显示值</p></li><li><ul><li>范围 <code>1901</code>到<code>2155</code>，和 <code>0000</code>。</li></ul></li><li><p><code>DATE</code>类型用于具有日期部分但没有时间部分的值：</p></li><li><ul><li><code>DATE</code>以格式*<code>YYYY-MM-DD</code>*显示值 ；</li></ul></li><li><p>支持的范围是 <code>&#39;1000-01-01&#39;</code> 到 <code>&#39;9999-12-31&#39;</code>；</p></li><li><p><code>DATETIME</code>类型用于包含日期和时间部分的值：</p></li><li><ul><li><code>DATETIME</code>以格式&#39;<em><code>YYYY-MM-DD hh:mm:ss</code></em>&#39;显示值；</li></ul></li><li><p>支持的范围是<code>1000-01-01 00:00:00</code>到<code>9999-12-31 23:59:59</code>;</p></li><li><p><code>TIMESTAMP</code>数据类型被用于同时包含日期和时间部分的值：</p></li><li><ul><li><code>TIMESTAMP</code>以格式&#39;<em><code>YYYY-MM-DD hh:mm:ss</code></em>&#39;显示值；</li></ul></li><li><p>但是它的范围是UTC的时间范围：<code>&#39;1970-01-01 00:00:01&#39;</code>到<code>&#39;2038-01-19 03:14:07&#39;</code>;</p></li><li><p>另外：<code>DATETIME</code>或<code>TIMESTAMP</code> 值可以包括在高达微秒（6位）精度的后小数秒一部分</p></li><li><ul><li>比如DATETIME表示的范围可以是<code>&#39;1000-01-01 00:00:00.000000&#39;</code>到<code>&#39;9999-12-31 23:59:59.999999&#39;</code>;</li></ul></li></ul><p><strong>字符串类型</strong></p><p>MySQL的字符串类型表示方式如下：</p><ul><li><p><code>CHAR</code>类型在创建表时为固定长度，长度可以是0到255之间的任何值；</p></li><li><ul><li>在被查询时，会删除后面的空格；</li></ul></li><li><p><code>VARCHAR</code>类型的值是可变长度的字符串，长度可以指定为0到65535之间的值；</p></li><li><ul><li>在被查询时，不会删除后面的空格；</li></ul></li><li><p><code>BINARY</code>和<code>VARBINARY</code> 类型用于存储二进制字符串，存储的是字节字符串；</p></li><li><ul><li>https://dev.mysql.com/doc/refman/8.0/en/binary-varbinary.html</li></ul></li><li><p><code>BLOB</code>用于存储大的二进制类型；</p></li><li><p><code>TEXT</code>用于存储大的字符串类型；</p></li></ul><h4 id="_2-3-2-表的约束" tabindex="-1"><a class="header-anchor" href="#_2-3-2-表的约束"><span>2.3.2. 表的约束</span></a></h4><p><strong>主键：PRIMARY KEY</strong></p><p>一张表中，我们为了区分每一条记录的唯一性，必须有一个字段是永远不会重复，并且不会为空的，这个字段我们通常会将它设置为主键：</p><ul><li>主键是表中唯一的索引；</li><li>并且必须是NOT NULL的，如果没有设置 NOT NULL，那么MySQL也会隐式的设置为NOT NULL；</li><li>主键也可以是多列索引，PRIMARY KEY(<em><code>key_part</code></em>, ...)，我们一般称之为联合主键；</li><li>建议：开发中主键字段应该是和业务无关的，尽量不要使用业务字段来作为主键；</li></ul><p><strong>唯一：UNIQUE</strong></p><p>某些字段在开发中我们希望是唯一的，不会重复的，比如手机号码、身份证号码等，这个字段我们可以使用UNIQUE来约束：</p><ul><li>使用UNIQUE约束的字段在表中必须是不同的；</li><li>对于所有引擎，<code>UNIQUE</code> 索引允许<code>NULL</code>包含的列具有多个值<code>NULL</code>。</li></ul><p><strong>不能为空：NOT NULL</strong></p><p>某些字段我们要求用户必须插入值，不可以为空，这个时候我们可以使用 NOT NULL 来约束；</p><p><strong>默认值：DEFAULT</strong></p><p>某些字段我们希望在没有设置值时给予一个默认值，这个时候我们可以使用 DEFAULT来完成；</p><p><strong>自动递增：AUTO_INCREMENT</strong></p><p>某些字段我们希望不设置值时可以进行递增，比如用户的id，这个时候可以使用AUTO_INCREMENT来完成；</p><p>外键约束也是最常用的一种约束手段，我们再讲到多表关系时，再进行讲解；</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 创建表CREATE TABLE IF NOT EXISTS `users`(	id INT PRIMARY KEY AUTO_INCREMENT,	name VARCHAR(20) NOT NULL,	age INT DEFAULT 0,	telPhone VARCHAR(20) DEFAULT &#39;&#39; UNIQUE NOT NULL,	createTime TIMESTAMP DEFAULT CURRENT_TIMESTAMP);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>删除数据表</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 删除表DROP TABLE `moment`;DROP TABLE IF EXISTS `moment`;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>修改数据表</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 1.修改表名ALTER TABLE `moments` RENAME TO `moment`;# 2.添加一个新的列ALTER TABLE `moment` ADD `publishTime` DATETIME;ALTER TABLE `moment` ADD `updateTime` DATETIME;# 3.删除一列数据ALTER TABLE `moment` DROP `updateTime`;# 4.修改列的名称ALTER TABLE `moment` CHANGE `publishTime` `publishDate` DATE;# 5.修改列的数据类型ALTER TABLE `moment` MODIFY `id` INT;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-3-dml语句" tabindex="-1"><a class="header-anchor" href="#_2-3-dml语句"><span>2.3. DML语句</span></a></h3><p>新建一张商品表：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>CREATE TABLE IF NOT EXISTS `products`(	`id` INT PRIMARY KEY AUTO_INCREMENT,	`title` VARCHAR(20),	`description` VARCHAR(200),	`price` DOUBLE,	`publishTime` DATETIME);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-3-1-插入数据" tabindex="-1"><a class="header-anchor" href="#_2-3-1-插入数据"><span>2.3.1. 插入数据</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>INSERT INTO `products` (`title`, `description`, `price`, `publishTime`) 								VALUES (&#39;iPhone&#39;, &#39;iPhone12只要998&#39;, 998.88, &#39;2020-10-10&#39;); INSERT INTO `products` (`title`, `description`, `price`, `publishTime`) 								VALUES (&#39;huawei&#39;, &#39;iPhoneP40只要888&#39;, 888.88, &#39;2020-11-11&#39;);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-3-2-删除数据" tabindex="-1"><a class="header-anchor" href="#_2-3-2-删除数据"><span>2.3.2. 删除数据</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 删除数据# 会删除表中所有的数据DELETE FROM `products`;# 会删除符合条件的数据DELETE FROM `products` WHERE `title` = &#39;iPhone&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-3-3-修改数据" tabindex="-1"><a class="header-anchor" href="#_2-3-3-修改数据"><span>2.3.3. 修改数据</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 修改数据# 会修改表中所有的数据UPDATE `products`  SET `title` = &#39;iPhone12&#39;, `price` = 1299.88;# 会修改符合条件的数据UPDATE `products`  SET `title` = &#39;iPhone12&#39;, `price` = 1299.88 WHERE `title` = &#39;iPhone&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果我们希望修改完数据后，直接可以显示最新的更新时间：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>ALTER TABLE `products` ADD `updateTime` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-4-dql语句" tabindex="-1"><a class="header-anchor" href="#_2-4-dql语句"><span>2.4. DQL语句</span></a></h3><p>SELECT用于从一个或者多个表中检索选中的行（Record）。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT select_expr [, select_expr]...	[FROM table_references]	[WHERE where_condition]	[ORDER expr [ASC | DESC]]	[LIMIT {[offset,] row_count | row_count OFFSET offset}]	[GROUP BY expr]	[HAVING where_condition]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>我们先准备一张表：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>CREATE TABLE IF NOT EXISTS `products` (	id INT PRIMARY KEY AUTO_INCREMENT,	brand VARCHAR(20),	title VARCHAR(100) NOT NULL,	price DOUBLE NOT NULL,	score DECIMAL(2,1),	voteCnt INT,	url VARCHAR(100),	pid INT);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>我们在其中插入一些数据：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const mysql = require(&#39;mysql2&#39;); const connection = mysql.createConnection({  host: &#39;localhost&#39;,  port: 3306,  user: &#39;root&#39;,  password: &#39;Coderwhy888.&#39;,  database: &#39;coderhub&#39;});const statement = `INSERT INTO products SET ?;`const phoneJson = require(&#39;./phone.json&#39;);for (let phone of phoneJson) {  connection.query(statement, phone);}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62t3HsvMnYVHy4GCDf3vJPwvOm3zxDMvbGXcNJcCp9dvgXkicArXOvoKg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">image-20201111103013994</p><h4 id="_2-4-1-基本查询" tabindex="-1"><a class="header-anchor" href="#_2-4-1-基本查询"><span>2.4.1. 基本查询</span></a></h4><p>查询所有的数据并且显示所有的字段：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products`;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查询title、brand、price：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT title, brand, price FROM `products`;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>我们也可以给字段起别名：</p><ul><li>别名一般在多张表或者给客户端返回对应的key时会使用到；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT title as t, brand as b, price as p FROM `products`;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-4-2-条件查询" tabindex="-1"><a class="header-anchor" href="#_2-4-2-条件查询"><span>2.4.2. 条件查询</span></a></h4><p>在开发中，我们希望根据条件来筛选我们的数据，这个时候我们要使用条件查询：</p><ul><li>条件查询会使用 WEHRE查询子句；</li></ul><p><strong>WHERE的比较运算符</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 查询价格小于1000的手机SELECT * FROM `products` WHERE price &lt; 1000;# 查询价格大于等于2000的手机SELECT * FROM `products` WHERE price &gt;= 2000;# 价格等于3399的手机SELECT * FROM `products` WHERE price = 3399;# 价格不等于3399的手机SELECT * FROM `products` WHERE price = 3399;# 查询华为品牌的手机SELECT * FROM `products` WHERE `brand` = &#39;华为&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>WHERE的逻辑运算符</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 查询品牌是华为，并且小于2000元的手机SELECT * FROM `products` WHERE `brand` = &#39;华为&#39; and `price` &lt; 2000;SELECT * FROM `products` WHERE `brand` = &#39;华为&#39; &amp;&amp; `price` &lt; 2000;# 查询1000到2000的手机（不包含1000和2000）SELECT * FROM `products` WHERE price &gt; 1000 and price &lt; 2000;# OR: 符合一个条件即可# 查询所有的华为手机或者价格小于1000的手机SELECT * FROM `products` WHERE brand = &#39;华为&#39; or price &lt; 1000;# 查询1000到2000的手机（包含1000和2000）SELECT * FROM `products` WHERE price BETWEEN 1000 and 2000;# 查看多个结果中的一个SELECT * FROM `products` WHERE brand in (&#39;华为&#39;, &#39;小米&#39;);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>WHERE的模糊查询</strong></p><p>模糊查询使用<code>LIKE</code>关键字，结合两个特殊的符号：</p><ul><li><code>%</code>表示匹配任意个的任意字符；</li><li><code>_</code>表示匹配一个的任意字符；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 查询所有以v开头的titleSELECT * FROM `products` WHERE title LIKE &#39;v%&#39;;# 查询带M的titleSELECT * FROM `products` WHERE title LIKE &#39;%M%&#39;;# 查询带M的title必须是第三个字符SELECT * FROM `products` WHERE title LIKE &#39;__M%&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-4-3-查询排序" tabindex="-1"><a class="header-anchor" href="#_2-4-3-查询排序"><span>2.4.3. 查询排序</span></a></h4><p>当我们查询到结果的时候，我们希望讲结果按照某种方式进行排序，这个时候使用的是<code>ORDER BY</code>；</p><p><code>ORDER BY</code>有两个常用的值：</p><ul><li><code>ASC</code>：升序排列；</li><li><code>DESC</code>：降序排列；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products` WHERE brand = &#39;华为&#39; or price &lt; 1000 ORDER BY price ASC;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-4-4-分页偏移" tabindex="-1"><a class="header-anchor" href="#_2-4-4-分页偏移"><span>2.4.4. 分页偏移</span></a></h4><p>当数据库中的数据非常多时，一次性查询到所有的结果进行显示是不太现实的：</p><ul><li>在真实开发中，我们都会要求用户传入offset、limit或者page等字段；</li><li>它们的目的是让我们可以在数据库中进行分页查询；</li><li>它的用法有[LIMIT[offset,] row_countrow_count OFFSET offset]</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products` LIMIT 30 OFFSET 0;SELECT * FROM `products` LIMIT 30 OFFSET 30;SELECT * FROM `products` LIMIT 30 OFFSET 60;# 另外一种写法：offset, row_countSELECT * FROM `products` LIMIT 90, 30;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-4-5-聚合函数" tabindex="-1"><a class="header-anchor" href="#_2-4-5-聚合函数"><span>2.4.5. 聚合函数</span></a></h4><p>聚合函数表示对<code>值集合</code>进行操作的组（集合）函数。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62L8Ye2kbuDjWjdJGVgkarUaxoNDbdrtXM6Y2RcfYUQLwbjDN5vbbdNg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">聚合查询</p><p>我们这里学习最常用的一些聚合函数：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 华为手机价格的平均值SELECT AVG(price) FROM `products` WHERE brand = &#39;华为&#39;;# 计算所有手机的平均分SELECT AVG(score) FROM `products`;# 手机中最低和最高分数SELECT MAX(score) FROM `products`;SELECT MIN(score) FROM `products`;# 计算总投票人数SELECT SUM(voteCnt) FROM `products`;# 计算所有条目的数量SELECT COUNT(*) FROM `products`;# 华为手机的个数SELECT COUNT(*) FROM `products` WHERE brand = &#39;华为&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>事实上聚合函数相当于默认将所有的数据分成了一组：</p><ul><li>我们前面使用avg还是max等，都是将所有的结果看成一组来计算的；</li><li>那么如果我们希望划分多个组：比如华为、苹果、小米等手机分别的平均价格，应该怎么来做呢？</li><li>这个时候我们可以使用 <code>GROUP BY</code>；</li></ul><p><code>GROUP BY</code>通常和聚合函数一起使用：</p><ul><li>表示我们先对数据进行分组，再对每一组数据，进行聚合函数的计算；</li></ul><p>我们现在来提一个需求：</p><ul><li>根据品牌进行分组；</li><li>计算各个品牌中商品的个数、平均价格、最高价格、最低价格、平均评分；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT brand, 			COUNT(*) as count, 			ROUND(AVG(price),2) as avgPrice,			MAX(price) as maxPrice,			MIN(price) as minPrice,			AVG(score) as avgScoreFROM `products` GROUP BY brand;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果我们还希望筛选出平均价格在4000以下，并且平均分在7以上的品牌：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT brand, 			COUNT(*) as count, 			ROUND(AVG(price),2) as avgPrice,			MAX(price) as maxPrice,			MIN(price) as minPrice,			AVG(score) as avgScoreFROM `products` GROUP BY brand HAVING avgPrice &lt; 4000 and avgScore &gt; 7;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-5-外键约束" tabindex="-1"><a class="header-anchor" href="#_2-5-外键约束"><span>2.5. 外键约束</span></a></h3><h4 id="_2-5-1-创建多张表" tabindex="-1"><a class="header-anchor" href="#_2-5-1-创建多张表"><span>2.5.1. 创建多张表</span></a></h4><p>假如我们的上面的商品表中，对应的品牌还需要包含其他的信息：</p><ul><li>比如品牌的官网，品牌的世界排名，品牌的市值等等；</li></ul><p>如果我们直接在商品中去体现品牌相关的信息，会存在一些问题：</p><ul><li>一方面，products表中应该表示的都是商品相关的数据，应该有另外一张表来表示brand的数据；</li><li>另一方面，多个商品使用的品牌是一致时，会存在大量的冗余数据；</li></ul><p>所以，我们可以将所有的批评数据，单独放到一张表中，创建一张品牌的表：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>CREATE TABLE IF NOT EXISTS `brand`(	id INT PRIMARY KEY AUTO_INCREMENT,	name VARCHAR(20) NOT NULL,	website VARCHAR(100),	worldRank INT);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>插入模拟的数据：</p><ul><li>这里我是刻意有一些商品数据的品牌是没有添加的；</li><li>并且也可以添加了一些不存在的手机品牌；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>INSERT INTO `brand` (name, website, worldRank) VALUES (&#39;华为&#39;, &#39;www.huawei.com&#39;, 1);INSERT INTO `brand` (name, website, worldRank) VALUES (&#39;小米&#39;, &#39;www.mi.com&#39;, 10);INSERT INTO `brand` (name, website, worldRank) VALUES (&#39;苹果&#39;, &#39;www.apple.com&#39;, 5);INSERT INTO `brand` (name, website, worldRank) VALUES (&#39;oppo&#39;, &#39;www.oppo.com&#39;, 15);INSERT INTO `brand` (name, website, worldRank) VALUES (&#39;京东&#39;, &#39;www.jd.com&#39;, 3);INSERT INTO `brand` (name, website, worldRank) VALUES (&#39;Google&#39;, &#39;www.google.com&#39;, 8);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-5-2-创建外键" tabindex="-1"><a class="header-anchor" href="#_2-5-2-创建外键"><span>2.5.2. 创建外键</span></a></h4><p>我们先给<code>products</code>添加一个<code>brand_id</code>字段：</p><p>将两张表联系起来，我们可以将<code>products</code>中的<code>brand_id</code>关联到<code>brand</code>中的<code>id</code>：</p><ul><li><p>如果是创建表添加外键约束：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>FOREIGN KEY (brand_id) REFERENCES brand(id)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>如果是表已经创建好，额外添加外键：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>ALTER TABLE `products` ADD FOREIGN KEY (brand_id) REFERENCES brand(id);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><p>现在我们可以将<code>products</code>中的<code>brand_id</code>关联到<code>brand</code>中的<code>id</code>的值：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>UPDATE `products` SET `brand_id` = 1 WHERE `brand` = &#39;华为&#39;;UPDATE `products` SET `brand_id` = 4 WHERE `brand` = &#39;OPPO&#39;;UPDATE `products` SET `brand_id` = 3 WHERE `brand` = &#39;苹果&#39;;UPDATE `products` SET `brand_id` = 2 WHERE `brand` = &#39;小米&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-5-3-删除和更新" tabindex="-1"><a class="header-anchor" href="#_2-5-3-删除和更新"><span>2.5.3. 删除和更新</span></a></h4><p>我们来思考一个问题：</p><ul><li>如果<code>products</code>中引用的外键被更新了或者删除了，这个时候会出现什么情况呢？</li></ul><p>我们来进行一个更新操作：比如将华为的id更新为100</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>UPDATE `brand` SET id = 100 WHERE id = 1;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个时候执行代码是报错的：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62s4NqCyOHNHzI33dvsnSaKZmI3FeOoGvmwUpL1ric8ibYZCl8xiawqGVfg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">不可以更新和删除，因为有一个外键引用</p><p>如果我希望可以更新呢？我们可以给更新时设置几个值：</p><ul><li><p>RESTRICT（默认属性）：当更新或删除某个记录时，会检查该记录是否有关联的外键记录，有的话会报错的，不允许更新或删除；</p></li><li><p>NO ACTION：和RESTRICT是一致的，是在SQL标准中定义的；</p></li><li><p>CASCADE：当更新或删除某个记录时，会检查该记录是否有关联的外键记录，有的话：</p></li><li><ul><li>更新：那么会更新对应的记录；</li></ul></li><li><p>删除：那么关联的记录会被一起删除掉；</p></li><li><p>SET NULL：当更新或删除某个记录时，会检查该记录是否有关联的外键记录，有的话，将对应的值设置为NULL；</p></li></ul><p><strong>如果修改外键的更新时的动作呢？</strong></p><p>第一步：查看表结构：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 执行命令SHOW CREATE TABLE `products`;# 结果如下：CREATE TABLE `products` (  `id` int NOT NULL AUTO_INCREMENT,  `brand` varchar(20) DEFAULT NULL,  `title` varchar(100) NOT NULL,  `price` double NOT NULL,  `score` decimal(2,1) DEFAULT NULL,  `voteCnt` int DEFAULT NULL,  `url` varchar(100) DEFAULT NULL,  `pid` int DEFAULT NULL,  `brand_id` int DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `brand_id` (`brand_id`),  CONSTRAINT `products_ibfk_1` FOREIGN KEY (`brand_id`) REFERENCES `brand` (`id`)) ENGINE=InnoDB AUTO_INCREMENT=109 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个时候，我们可以知道外键的名称是<code>products_ibfk_1</code>。</p><p>第二步：删除之前的外键</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>ALTER TABLE `products` DROP FOREIGN KEY products_ibfk_1;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>第三步：添加新的外键，并且设置新的action</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>ALTER TABLE `products` ADD FOREIGN KEY (brand_id) REFERENCES brand(id) ON UPDATE CASCADE ON DELETE CASCADE;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-6-多表查询" tabindex="-1"><a class="header-anchor" href="#_2-6-多表查询"><span>2.6. 多表查询</span></a></h3><h4 id="_2-6-1-多表查询" tabindex="-1"><a class="header-anchor" href="#_2-6-1-多表查询"><span>2.6.1. 多表查询</span></a></h4><p>如果我们希望查询到产品的同时，显示对应的品牌相关的信息，因为数据是存放在两张表中，所以这个时候就需要进行多表查询。</p><p>如果我们直接通过查询语句希望在多张表中查询到数据，这个时候是什么效果呢？</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products`, `brand`;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">查询结果</p><p>我们会发现一共有648条数据，这个数据量是如何得到的呢？</p><ul><li>第一张表的108条 * 第二张表的6条数据；</li><li>也就是说第一张表中每一个条数据，都会和第二张表中的每一条数据结合一次；</li><li>这个结果我们称之为 <code>笛卡尔乘积</code>，也称之为<code>直积</code>，表示为 X*Y；</li></ul><p>但是事实上很多的数据是没有意义的，比如华为和苹果、小米的品牌结合起来的数据就是没有意义的，我们可不可以进行筛选呢？</p><ul><li>使用where来进行筛选；</li><li>这个表示查询到笛卡尔乘积后的结果中，符合<code>products.brand_id = brand.id</code>条件的数据过滤出来；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products`, `brand` WHERE `products`.brand_id = `brand`.id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>事实上我们想要的效果并不是这样的，而且表中的某些特定的数据，这个时候我们可以使用 SQL JOIN 操作：</p><ul><li>左连接</li><li>右连接</li><li>内连接</li><li>全连接</li></ul><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62ib7r5wOcXJmB58QP8ERVO3TCwV0ft7wEfHibfQ2Wvh7YKibJQdsSnXcGw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">SQL JOIN</p><h4 id="_2-6-2-左连接" tabindex="-1"><a class="header-anchor" href="#_2-6-2-左连接"><span>2.6.2. 左连接</span></a></h4><p>如果我们希望获取到的是左边所有的数据（以左表为主）：</p><ul><li>这个时候就表示无论左边的表是否有对应的<code>brand_id</code>的值对应右边表的<code>id</code>，左边的数据都会被查询出来；</li><li>这个也是开发中使用最多的情况，它的完整写法是<code>LEFT [OUTER] JOIN</code>，但是OUTER可以省略的；</li></ul><figure><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62mWOib1xbOuvoQUlV8paKuIgqzyp1SnGTetngQiavKSj5DUwabkJibsWfQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products` LEFT JOIN `brand` ON `products`.brand_id = `brand`.id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果我们查询的是左连接部分中，和右表无关的数据：</p><ul><li>也非常简单，只需要加上一个条件即可：B表中的数据为空</li></ul><figure><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products` LEFT JOIN `brand` ON `products`.brand_id = `brand`.id WHERE brand.id IS NULL;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-6-3-右连接" tabindex="-1"><a class="header-anchor" href="#_2-6-3-右连接"><span>2.6.3. 右连接</span></a></h4><p>如果我们希望获取到的是右边所有的数据（以由表为主）：</p><figure><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><ul><li>这个时候就表示无论左边的表中的<code>brand_id</code>是否有和右边表中的<code>id</code>对应，右边的数据都会被查询出来；</li><li>右连接在开发中没有左连接常用，它的完整写法是<code>RIGHT [OUTER] JOIN</code>，但是OUTER可以省略的；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products` RIGHT JOIN `brand` ON `products`.brand_id = `brand`.id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果我们查询的是右连接部分中，和左表无关的数据：</p><ul><li>也非常简单，只需要加上一个条件即可：A表中的数据为空；</li></ul><figure><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62hAq5L2QQXPu7HZJG7oM9JAmR92pSJBsvlmKIE8D1s8DtUJLthJWoNg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products` RIGHT JOIN `brand` ON `products`.brand_id = `brand`.id WHERE products.id IS NULL;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-6-4-内连接" tabindex="-1"><a class="header-anchor" href="#_2-6-4-内连接"><span>2.6.4. 内连接</span></a></h4><p>事实上内连接是表示左边的表和右边的表都有对应的数据关联：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products` INNER JOIN `brand` ON `products`.brand_id = `brand`.id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>我们会发现它和之前的下面写法是一样的效果：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM `products`, `brand` WHERE `products`.brand_id = `brand`.id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>但是他们代表的含义并不相同：</p><ul><li>SQL语句一：内连接，代表的是在两张表连接时就会约束数据之间的关系，来决定之后查询的结果；</li><li>SQL语句二：where条件，代表的是先计算出笛卡尔乘积，在笛卡尔乘积的数据基础之上进行where条件的筛选；</li></ul><p>内连接在开发中偶尔也会常见使用，看自己的场景。</p><p>内连接有其他的写法：<code>CROSS JOIN</code>或者 <code>JOIN</code>都可以；</p><h4 id="_2-6-5-全连接" tabindex="-1"><a class="header-anchor" href="#_2-6-5-全连接"><span>2.6.5. 全连接</span></a></h4><p>SQL规范中全连接是使用FULL JOIN，但是MySQL中并没有对它的支持，我们需要使用 UNION 来实现：</p><figure><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict627x26F7vljAQ0icOfTINFSqFhoAAT0rQgadHCuPHPvTBmnnElCAl3rnQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>(SELECT * FROM `products` LEFT JOIN `brand` ON `products`.brand_id = `brand`.id)UNION(SELECT * FROM `products` RIGHT JOIN `brand` ON `products`.brand_id = `brand`.id);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果我们希望查询的是下面的结果：</p><figure><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>(SELECT * FROM `products` LEFT JOIN `brand` ON `products`.brand_id = `brand`.id WHERE `brand`.id IS NULL)UNION(SELECT * FROM `products` RIGHT JOIN `brand` ON `products`.brand_id = `brand`.id WHERE `products`.id IS NULL);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-7-多对多关系" tabindex="-1"><a class="header-anchor" href="#_2-7-多对多关系"><span>2.7. 多对多关系</span></a></h3><h4 id="_2-7-1-准备多张表" tabindex="-1"><a class="header-anchor" href="#_2-7-1-准备多张表"><span>2.7.1. 准备多张表</span></a></h4><p>在开发中我们还会遇到多对多的关系：</p><ul><li>比如学生可以选择多门课程，一个课程可以被多个学生选择；</li><li>这种情况我们应该在开发中如何处理呢？</li></ul><p>这个时候我们通常是会建三张表来建立它们之间的关系的：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 创建学生表CREATE TABLE IF NOT EXISTS `students`(	id INT PRIMARY KEY AUTO_INCREMENT,	name VARCHAR(20) NOT NULL,	age INT);# 创建课程表CREATE TABLE IF NOT EXISTS `courses`(	id INT PRIMARY KEY AUTO_INCREMENT,	name VARCHAR(20) NOT NULL,	price DOUBLE NOT NULL);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>我们在两张表中插入一些数据：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>INSERT INTO `students` (name, age) VALUES(&#39;why&#39;, 18);INSERT INTO `students` (name, age) VALUES(&#39;tom&#39;, 22);INSERT INTO `students` (name, age) VALUES(&#39;lilei&#39;, 25);INSERT INTO `students` (name, age) VALUES(&#39;lucy&#39;, 16);INSERT INTO `students` (name, age) VALUES(&#39;lily&#39;, 20);INSERT INTO `courses` (name, price) VALUES (&#39;英语&#39;, 100);INSERT INTO `courses` (name, price) VALUES (&#39;语文&#39;, 666);INSERT INTO `courses` (name, price) VALUES (&#39;数学&#39;, 888);INSERT INTO `courses` (name, price) VALUES (&#39;历史&#39;, 80);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-7-2-创建关系表" tabindex="-1"><a class="header-anchor" href="#_2-7-2-创建关系表"><span>2.7.2. 创建关系表</span></a></h4><p>我们需要一个关系表来记录两张表中的数据关系：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 创建关系表CREATE TABLE IF NOT EXISTS `students_select_courses`(	id INT PRIMARY KEY AUTO_INCREMENT,	student_id INT NOT NULL,	course_id INT NOT NULL,	FOREIGN KEY (student_id) REFERENCES students(id) ON UPDATE CASCADE,	FOREIGN KEY (course_id) REFERENCES courses(id) ON UPDATE CASCADE);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>我们插入一些数据：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># why 选修了 英文和数学INSERT INTO `students_select_courses` (student_id, course_id) VALUES (1, 1);INSERT INTO `students_select_courses` (student_id, course_id) VALUES (1, 3);# lilei选修了 语文和数学和历史INSERT INTO `students_select_courses` (student_id, course_id) VALUES (3, 2);INSERT INTO `students_select_courses` (student_id, course_id) VALUES (3, 3);INSERT INTO `students_select_courses` (student_id, course_id) VALUES (3, 4);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-7-3-多表数据查询" tabindex="-1"><a class="header-anchor" href="#_2-7-3-多表数据查询"><span>2.7.3. 多表数据查询</span></a></h4><p>查询多条数据：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 查询所有的学生选择的所有课程SELECT 	stu.id studentId, stu.name studentName, cs.id courseId, cs.name courseName, cs.price coursePrice FROM `students` stu JOIN `students_select_courses` ssc 	ON stu.id = ssc.student_id JOIN `courses` cs 	ON ssc.course_id = cs.id; # 查询所有的选手选课情况SELECT 	stu.id studentId, stu.name studentName, cs.id courseId, cs.name courseName, cs.price coursePrice FROM `students` stu LEFT JOIN `students_select_courses` ssc 	ON stu.id = ssc.student_id LEFT JOIN `courses` cs 	ON ssc.course_id = cs.id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查询单个学生的课程：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># why同学选择了哪些课程SELECT 	stu.id studentId, stu.name studentName, cs.id courseId, cs.name courseName, cs.price coursePrice FROM `students` stu JOIN `students_select_courses` ssc 	ON stu.id = ssc.student_id JOIN `courses` cs 	ON ssc.course_id = cs.id 	WHERE stu.id = 1; # lily同学选择了哪些课程SELECT 	stu.id studentId, stu.name studentName, cs.id courseId, cs.name courseName, cs.price coursePrice FROM `students` stu LEFT JOIN `students_select_courses` ssc 	ON stu.id = ssc.student_id LEFT JOIN `courses` cs 	ON ssc.course_id = cs.id 	WHERE stu.id = 5;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查询哪些学生没有选择和哪些课程没有被选择：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 哪些学生是没有选课的SELECT 	stu.id studentId, stu.name studentName, cs.id courseId, cs.name courseName, cs.price coursePrice FROM `students` stuLEFT JOIN `students_select_courses` ssc	ON stu.id = ssc.student_idLEFT JOIN `courses` cs	ON ssc.course_id = cs.id	WHERE cs.id IS NULL;# 查询哪些课程没有被学生选择SELECT 	stu.id studentId, stu.name studentName, cs.id courseId, cs.name courseName, cs.price coursePrice FROM `students` stuRIGHT JOIN `students_select_courses` ssc	ON stu.id = ssc.student_idRIGHT JOIN `courses` cs	ON ssc.course_id = cs.id	WHERE stu.id IS NULL;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="node操作mysql" tabindex="-1"><a class="header-anchor" href="#node操作mysql"><span>Node操作MySQL</span></a></h2><h3 id="_3-1-对象和数组" tabindex="-1"><a class="header-anchor" href="#_3-1-对象和数组"><span>3.1.对象和数组</span></a></h3><h4 id="_3-1-1-一对多-对象" tabindex="-1"><a class="header-anchor" href="#_3-1-1-一对多-对象"><span>3.1.1. 一对多 - 对象</span></a></h4><p>前面我们学习的查询语句，查询到的结果通常是一张表，比如查询手机+品牌信息：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT * FROM products LEFT JOIN brand ON products.brand_id = brand.id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62q9MKZf1ENmyg00mlTLh9kSnLODiaBSia8h2jPicMib9eZFmDcXibp4IJROw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">查询结果</p><p>但是在真实开发中，实际上红色圈起来的部分应该放入到一个对象中，那么我们可以使用下面的查询方式：</p><ul><li>这个时候我们要用 <code>JSON_OBJECT</code>;</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT products.id as id, products.title as title, products.price as price, products.score as score, 				JSON_OBJECT(&#39;id&#39;, brand.id, &#39;name&#39;, brand.name, &#39;rank&#39;, brand.phoneRank, &#39;website&#39;, brand.website) as brandFROM products LEFT JOIN brand ON products.brand_id = brand.id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">查询结果</p><h4 id="_3-1-2-多对多-数组" tabindex="-1"><a class="header-anchor" href="#_3-1-2-多对多-数组"><span>3.1.2. 多对多 - 数组</span></a></h4><p>在多对多关系中，我们希望查询到的是一个数组：</p><ul><li>比如一个学生的多门课程信息，应该是放到一个数组中的；</li><li>数组中存放的是课程信息的一个个对象；</li><li>这个时候我们要 <code>JSON_ARRAYAGG</code>和<code>JSON_OBJECT</code>结合来使用；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>SELECT stu.id, stu.name, stu.age, 		   JSON_ARRAYAGG(JSON_OBJECT(&#39;id&#39;, cs.id, &#39;name&#39;, cs.name)) as courses FROM students stuLEFT JOIN students_select_courses ssc ON stu.id = ssc.student_idLEFT JOIN courses cs ON ssc.course_id = cs.idGROUP BY stu.id;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片" loading="lazy">查询结果</p><h3 id="_3-2-mysql2的使用" tabindex="-1"><a class="header-anchor" href="#_3-2-mysql2的使用"><span>3.2. mysql2的使用</span></a></h3><h4 id="_3-2-1-认识mysql2" tabindex="-1"><a class="header-anchor" href="#_3-2-1-认识mysql2"><span>3.2.1. 认识mysql2</span></a></h4><p>前面我们所有的操作都是在GUI工具中，通过执行SQL语句来获取结果的，那真实开发中肯定是通过代码来完成所有的操作的。</p><p>那么如何可以在Node的代码中执行SQL语句来，这里我们可以借助于两个库：</p><ul><li>mysql：最早的Node连接MySQL的数据库驱动；</li><li>mysql2：在mysql的基础之上，进行了很多的优化、改进；</li></ul><p>目前相对来说，我更偏向于使用mysql2，mysql2兼容mysql的API，并且提供了一些附加功能</p><ul><li><p>更快/更好的性能；</p></li><li><p>Prepared Statement（预编译语句）：</p></li><li><ul><li>提高性能：将创建的语句模块发送给MySQL，然后MySQL编译（解析、优化、转换）语句模块，并且存储它但是不执行，之后我们在真正执行时会给<code>?</code>提供实际的参数才会执行；就算多次执行，也只会编译一次，所以性能是更高的；</li></ul></li><li><p>防止SQL注入：之后传入的值不会像模块引擎那样就编译，那么一些SQL注入的内容不会被执行；<code>or 1 = 1</code>不会被执行；</p></li><li><p>支持Promise，所以我们可以使用async和await语法</p></li><li><p>等等....</p></li></ul><p>所以后续的学习中我会选择mysql2在node中操作数据。</p><p><strong>安装</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>npm install mysql2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-2-2-mysql2基本使用" tabindex="-1"><a class="header-anchor" href="#_3-2-2-mysql2基本使用"><span>3.2.2. mysql2基本使用</span></a></h4><p>mysql2的使用过程如下：</p><ul><li>第一步：创建连接（通过createConnection），并且获取连接对象；</li><li>第二步：执行SQL语句即可（通过query）；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const mysql = require(&#39;mysql2&#39;);// 创建连接const connection = mysql.createConnection({  host: &#39;localhost&#39;,  database: &#39;coderhub&#39;,  user: &#39;root&#39;,  password: &#39;Coderwhy888.&#39;});// 执行SQL语句connection.query(&#39;SELECT title, price FROM products WHERE price &gt; 9000;&#39;, (err, results, fields) =&gt; {  console.log(err);  console.log(&#39;----------&#39;);  console.log(results);  console.log(&#39;----------&#39;);  console.log(fields);})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>通常我们的连接建立之后是不会轻易断开的，因为我们需要这个连接持续帮助我们查询客户端过来的请求。</p><p>但是如果我们确实希望断开连接，可以使用 <code>end</code> 方法：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>connection.end();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-2-3-预编译语句" tabindex="-1"><a class="header-anchor" href="#_3-2-3-预编译语句"><span>3.2.3. 预编译语句</span></a></h4><p>Prepared Statement（预编译语句）：</p><ul><li>提高性能：将创建的语句模块发送给MySQL，然后MySQL编译（解析、优化、转换）语句模块，并且存储它但是不执行，之后我们在真正执行时会给<code>?</code>提供实际的参数才会执行；就算多次执行，也只会编译一次，所以性能是更高的；</li><li>防止SQL注入：之后传入的值不会像模块引擎那样就编译，那么一些SQL注入的内容不会被执行；<code>or 1 = 1</code>不会被执行；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const statement = &#39;SELECT * FROM products WHERE price &gt; ? and brand = ?;&#39;;connection.execute(statement, [1000, &#39;华为&#39;], (err, results) =&gt; {  console.log(results);});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>强调：如果再次执行该语句，它将会从LRU（Least Recently Used） Cache中获取获取，省略了编译statement的时间来提高性能。</p><h4 id="_3-2-4-连接池" tabindex="-1"><a class="header-anchor" href="#_3-2-4-连接池"><span>3.2.4. 连接池</span></a></h4><p>前面我们是创建了一个连接（connection），但是如果我们有多个请求的话，该连接很有可能正在被占用，那么我们是否需要每次一个请求都去创建一个新的连接呢？</p><ul><li>事实上，mysql2给我们提供了连接池（connection pools）；</li><li>连接池可以在需要的时候自动创建连接，并且创建的连接不会被销毁，会放到连接池中，后续可以继续使用；</li><li>我们可以在创建连接池的时候设置LIMIT，也就是最大创建个数；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const mysql = require(&#39;mysql2&#39;);const pool = mysql.createPool({  host: &#39;localhost&#39;,  database: &#39;coderhub&#39;,  user: &#39;root&#39;,  password: &#39;Coderwhy888.&#39;,  connectionLimit: 10});const statement = &#39;SELECT * FROM products WHERE price &gt; ? and brand = ?;&#39;;pool.execute(statement, [1000, &#39;华为&#39;], (err, results) =&gt; {  console.log(results);});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>为什么Node执行JavaScript时单线程的，还需要连接池呢？</p><ul><li>这是因为Node中操作数据库，本质上是通过Libuv进行了的数据库操作；</li><li>而在libuv中是可以有多个线程的，多个线程也是可以同时去建立连接来操作数据库的；</li></ul><h4 id="_3-2-5-promises" tabindex="-1"><a class="header-anchor" href="#_3-2-5-promises"><span>3.2.5. promises</span></a></h4><p>目前在JavaScript开发中我们更习惯Promise和await、async的方式，mysql2同样是支持的：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const mysql = require(&#39;mysql2&#39;);const pool = mysql.createPool({  host: &#39;localhost&#39;,  database: &#39;coderhub&#39;,  user: &#39;root&#39;,  password: &#39;Coderwhy888.&#39;,  connectionLimit: 5});const statement = &#39;SELECT * FROM products WHERE price &gt; ? and brand = ?;&#39;;pool.promise().execute(statement, [1000, &#39;华为&#39;]).then(([results]) =&gt; {  console.log(results);});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-3-orm的sequelize" tabindex="-1"><a class="header-anchor" href="#_3-3-orm的sequelize"><span>3.3. ORM的sequelize</span></a></h3><h4 id="_3-3-1-认识orm" tabindex="-1"><a class="header-anchor" href="#_3-3-1-认识orm"><span>3.3.1. 认识ORM</span></a></h4><p><strong>对象关系映射</strong>（英语：<strong>Object Relational Mapping</strong>，简称<strong>ORM</strong>，或<strong>O/RM</strong>，或<strong>O/R mapping</strong>），是一种程序设计的方案：</p><ul><li>从效果上来讲，它提供了一个可在编程语言中，使用 <code>虚拟对象数据库</code> 的效果；</li><li>比如在Java开发中经常使用的ORM包括：Hibernate、MyBatis；</li></ul><p>Node当中的ORM我们通常使用的是 <code>sequelize</code>;</p><ul><li>Sequelize是用于Postgres，MySQL，MariaDB，SQLite和Microsoft SQL Server的基于Node.js 的 ORM；</li><li>它支持非常多的功能；</li></ul><p>如果我们希望将Sequelize和MySQL一起使用，那么我们需要先安装两个东西：</p><ul><li>mysql2：sequelize在操作mysql时使用的是mysql2；</li><li>sequelize：使用它来让对象映射到表中；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>npm install sequelize mysql2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-3-2-sequelize的使用" tabindex="-1"><a class="header-anchor" href="#_3-3-2-sequelize的使用"><span>3.3.2. Sequelize的使用</span></a></h4><p>Sequelize的连接数据库：</p><ul><li>第一步：创建一个Sequelize的对象，并且制定数据库、用户名、密码、数据库类型、主机地址等；</li><li>第二步：测试连接是否成功；</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const {Sequelize, DataTypes, Model, Op} = require(&#39;sequelize&#39;);const sequelize = new Sequelize(&#39;coderhub&#39;, &#39;root&#39;, &#39;Coderwhy888.&#39;, {  host: &#39;localhost&#39;,  dialect: &#39;mysql&#39;});sequelize.authenticate().then(() =&gt; {  console.log(&quot;sequelize连接成功~&quot;);}).catch(err =&gt; {  console.log(&quot;sequlize连接失败~&quot;, err);});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Sequelize映射关系表：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>class Student extends Model {}Student.init({  id: {    type: DataTypes.INTEGER,    primaryKey: true,    autoIncrement: true  },  name: {    type: DataTypes.STRING,    allowNull: false  },  age: DataTypes.INTEGER}, {  sequelize,  createdAt: false,  updatedAt: false})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>测试增删改查的操作：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>async function queryStudent() {  // 1.查询所有的学生  const result1 = await Student.findAll({});  console.log(result1);  // 2.查询年龄大于等于20岁的学生  const result2 = await Student.findAll({    where: {      age: {        [Op.gte]: 20      }    }  });  console.log(result2);  // 3.创建用户  const result3 = await Student.create({    name: &#39;hmm&#39;,    age: 22  });  console.log(result3);  // 4.更新用户  const result4 = await Student.update({    age: 25  }, {    where: {      id: 6    }  });  console.log(result4);}queryStudent();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-3-3-多对多关系" tabindex="-1"><a class="header-anchor" href="#_3-3-3-多对多关系"><span>3.3.3. 多对多关系</span></a></h4><p>第一步：连接数据库</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const { Sequelize, DataTypes, Model, Op } = require(&#39;sequelize&#39;);const sequelize = new Sequelize(&#39;coderhub&#39;, &#39;root&#39;, &#39;Coderwhy888.&#39;, {  host: &#39;localhost&#39;,  dialect: &#39;mysql&#39;});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>第二步：创建映射关系</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>class Student extends Model {}Student.init({  id: {    type: DataTypes.INTEGER,    primaryKey: true,    autoIncrement: true  },  name: {    type: DataTypes.STRING,    allowNull: false  },  age: DataTypes.INTEGER}, {  sequelize,  createdAt: false,  updatedAt: false})class Course extends Model {}Course.init({  id: {    type: DataTypes.INTEGER,    primaryKey: true,    autoIncrement: true  },  name: {    type: DataTypes.STRING(20),    allowNull: false  },  price: {    type: DataTypes.DOUBLE,    allowNull: false  }}, {  sequelize,  createdAt: false,  updatedAt: false});class StudentCourse extends Model {};StudentCourse.init({  id: {    type: DataTypes.INTEGER,    primaryKey: true,    autoIncrement: true  },  studentId: {    type: DataTypes.INTEGER,    references: {      model: Student,      key: &#39;id&#39;    },    field: &#39;student_id&#39;,  },  courseId: {    type: DataTypes.INTEGER,    references: {      model: Course,      key: &#39;id&#39;    },    field: &#39;course_id&#39;,  }}, {  sequelize,  createdAt: false,  updatedAt: false,  tableName: &#39;students_select_courses&#39;});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>第三步：建立多对多的联系</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>Student.belongsToMany(Course, {  through: StudentCourse,   foreignKey: &#39;student_id&#39;,   otherKey: &#39;course_id&#39;,});Course.belongsToMany(Student, {  through: StudentCourse,   foreignKey: &#39;course_id&#39;,   otherKey: &#39;student_id&#39;});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>第四步：执行多对多查询操作：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>async function queryStudent() {  // 查询结果  const result = await Student.findAll({    include: {      model: Course    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="http协议" tabindex="-1"><a class="header-anchor" href="#http协议"><span>http协议</span></a></h1><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>1.超文本传输协议</span></span>\n<span class="line"><span>规定了如何从网站服务器传输超文本到本地浏览器,基于客户端服务器架构工作,是客户端和服务器端请求和应答标准</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>2.报文   过程中传递的数据块</span></span>\n<span class="line"><span>请求报文:1.请求方式 req.method获取请求方式   GET POST</span></span>\n<span class="line"><span>		2.请求地址 req.url获取请求地址</span></span>\n<span class="line"><span>		3.请求报文 req.headers[&#39;键名&#39;]获取请求报文</span></span>\n<span class="line"><span>		</span></span>\n<span class="line"><span>请求组成:请求行 方式 资源 协议版本</span></span>\n<span class="line"><span>		请求头 键值对</span></span>\n<span class="line"><span>		请求体 post有请求参数 get请求参数不在请求体中,在url地址后面</span></span>\n<span class="line"><span>		</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>响应报文:1.http状态码   200成功 404没找到 500服务器端错误 400客户端请求语法错</span></span>\n<span class="line"><span>		2.内容类型 text/html text/css application/javascript image/jpeg application/json</span></span>\n<span class="line"><span>		3. 内容长度 内容..</span></span>\n<span class="line"><span>		res.writeHead(状态码,{&#39;content-type&#39;:&#39;text/plain&#39;}) 内容类型默认纯文本</span></span>\n<span class="line"><span>		res.end(&#39;...&#39;)响应内容</span></span>\n<span class="line"><span>		</span></span>\n<span class="line"><span>响应组成:响应行 http协议 状态码 其他状态码(成功2xx 重定向 3xx 客户端4xx 服务器端错误5xx)</span></span>\n<span class="line"><span>		响应头 键值对</span></span>\n<span class="line"><span>		响应体 post有请求参数 get请求参数不在请求体中,在url地址后面</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="http请求与响应处理" tabindex="-1"><a class="header-anchor" href="#http请求与响应处理"><span>http请求与响应处理</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>8种请求方式 OPTIONS HEAD  GET POST PUT DELETE TRACE </span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>请求参数GET</span></span>\n<span class="line"><span>使用url模块,用于处理url地址   </span></span>\n<span class="line"><span>url.parse(req.url) 返回一个对象</span></span>\n<span class="line"><span>url.parse(req.url,true)把查询参数解析成对象</span></span>\n<span class="line"><span>url.parse(req.url,true).query得到这个对象  通过这个对象.键名得到参数值</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>解构赋值 { query, pathname} = url.parse(req.url,true) 得到参数对象和请求地址</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="window释放端口" tabindex="-1"><a class="header-anchor" href="#window释放端口"><span>window释放端口</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>1.cmd</span></span>\n<span class="line"><span>2.netstat -ano | findstr 9090 查询端口9090使用情况</span></span>\n<span class="line"><span>3.tasklist | findstr +进程ID  查询端口被进程占用的程序</span></span>\n<span class="line"><span>4.taskkill /f /t /im  +进程ID或程序  杀死进程</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="npm" tabindex="-1"><a class="header-anchor" href="#npm"><span>NPM</span></a></h1><h2 id="npm常用命令" tabindex="-1"><a class="header-anchor" href="#npm常用命令"><span>npm常用命令</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 临时</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --registry</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://registry.npm.taobao.org</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 插件名</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 配置</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> https://registry.npm.taobao.org</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 查看 npm 的版本 </span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 查看各个命令的简单用法</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 查看 npm 命令列表</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> help</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 查看 npm 的配置</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -l</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 查看插件的版本</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> view</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 插件名</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> versions</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 创建模块</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> init</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#当前项目安装的所有模块</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$npm</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> list</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#列出全局安装的模块 带上[--depth 0] 不深入到包的支点 更简洁</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -g</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --depth</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 读取package.json里面的配置单安装  </span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">//可简写成</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> i</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 默认安装指定模块的最新(@latest)版本</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [&lt;@scope&gt;/]</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">//eg:npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gulp</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 安装指定模块的指定版本</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [&lt;@scope&gt;/]</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">version</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">//eg:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gulp@3.9.1</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 安装指定指定版本范围内的模块</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [&lt;@scope&gt;/]</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">version range</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">//eg:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> vue@&quot;&gt;=1.0.28 &lt; 2.0.0&quot;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 安装指定模块的指定标签 默认值为(@latest)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [&lt;@scope&gt;/]</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">//eg:npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> sax@0.1.1</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 通过Github代码库地址安装</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">tarball</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ur</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">//eg:npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> git://github.com/package/path.git</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#卸载当前项目或全局模块 </span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> uninstall</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [-g] </span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#升级当前项目或全局的指定模块</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">nam</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [-g]</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 引用依赖 有些包是全局安装了，在项目里面只需要引用即可。</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [&lt;@scope&gt;/]</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[@</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">version</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">//eg:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 引用</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">   npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> link</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gulp</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gulp-ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gulp-ftp</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">//eg:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 解除引用</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> unlink</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> gulp</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 未注册 申请注册一个用户 直接在https://www.npmjs.com/注册一样</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> adduser</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">//执行后</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> 填写几个问题</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Username、Password、Email</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#已注册</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#发布</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> publish</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="npm私库搭建" tabindex="-1"><a class="header-anchor" href="#npm私库搭建"><span>NPM私库搭建</span></a></h2><h3 id="npm-git" tabindex="-1"><a class="header-anchor" href="#npm-git"><span>npm+git</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>1.新建私有git仓库</span></span>\n<span class="line"><span>2.clone仓库</span></span>\n<span class="line"><span>3.npm init</span></span>\n<span class="line"><span>4.按npm规范开发完。push到仓库即可</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>verdaccio(https://www.jianshu.com/p/0c905e4a8b70)</p><h3 id="云服务器安装node环境-nginx" tabindex="-1"><a class="header-anchor" href="#云服务器安装node环境-nginx"><span>云服务器安装node环境,nginx</span></a></h3><blockquote><p>1 云服务器安装verdaccio(轻量级开源私有npm代理注册表) npm i verdaccio -g</p></blockquote><blockquote><p>2 启动服务： verdaccio</p></blockquote><blockquote><p>3 配置config.yaml</p></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>1、vim /home/yg/.config/verdaccio/config.yaml 进入编辑配置文件</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># This is the default config file. It allows all users to do anything,</span></span>\n<span class="line"><span># so don&#39;t use it on production systems.</span></span>\n<span class="line"><span>#</span></span>\n<span class="line"><span># Look here for more config file examples:</span></span>\n<span class="line"><span># https://github.com/verdaccio/verdaccio/tree/master/conf</span></span>\n<span class="line"><span>#</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># path to a directory with all packages</span></span>\n<span class="line"><span># 所有包缓存的目录</span></span>\n<span class="line"><span>storage: ./storage</span></span>\n<span class="line"><span># path to a directory with plugins to include</span></span>\n<span class="line"><span># 插件目录</span></span>\n<span class="line"><span>plugins: ./plugins</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># 开启web服务，能够通过web访问</span></span>\n<span class="line"><span>web:</span></span>\n<span class="line"><span>  # WebUI is enabled as default, if you want disable it, just uncomment this line</span></span>\n<span class="line"><span>  #enable: false</span></span>\n<span class="line"><span>  title: Verdaccio</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># 验证信息</span></span>\n<span class="line"><span>auth:</span></span>\n<span class="line"><span>  htpasswd:</span></span>\n<span class="line"><span>    # 用户信息存储目录</span></span>\n<span class="line"><span>    file: ./htpasswd</span></span>\n<span class="line"><span>    # Maximum amount of users allowed to register, defaults to &quot;+inf&quot;.</span></span>\n<span class="line"><span>    # You can set this to -1 to disable registration.</span></span>\n<span class="line"><span>    #max_users: 1000</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># a list of other known repositories we can talk to</span></span>\n<span class="line"><span># 公有仓库配置</span></span>\n<span class="line"><span>uplinks:</span></span>\n<span class="line"><span>  npmjs:</span></span>\n<span class="line"><span>    url: https://registry.npmjs.org/</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>packages:</span></span>\n<span class="line"><span>  &#39;@*/*&#39;:</span></span>\n<span class="line"><span>    # scoped packages</span></span>\n<span class="line"><span>    access: $all</span></span>\n<span class="line"><span>    publish: $authenticated</span></span>\n<span class="line"><span>    # 代理，表示没有的仓库去这个npmjs里边去找</span></span>\n<span class="line"><span>    # npmjs 又指向 https://registry.npmjs.org/ ,就是上面的 uplinks 配置</span></span>\n<span class="line"><span>    proxy: npmjs</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>  &#39;**&#39;:</span></span>\n<span class="line"><span>    # allow all users (including non-authenticated users) to read and</span></span>\n<span class="line"><span>    # publish all packages</span></span>\n<span class="line"><span>    #</span></span>\n<span class="line"><span>    # you can specify usernames/groupnames (depending on your auth plugin)</span></span>\n<span class="line"><span>    # and three keywords: &quot;$all&quot;, &quot;$anonymous&quot;, &quot;$authenticated&quot;</span></span>\n<span class="line"><span>    # 三种身份所有人，匿名用户，认证（登录用户）</span></span>\n<span class="line"><span>    # 是否可访问所需的权限</span></span>\n<span class="line"><span>    access: $all</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # allow all known users to publish packages</span></span>\n<span class="line"><span>    # (anyone can register by default, remember?)</span></span>\n<span class="line"><span>    # 发布package的权限</span></span>\n<span class="line"><span>    publish: $authenticated</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # if package is not available locally, proxy requests to &#39;npmjs&#39; registry</span></span>\n<span class="line"><span>    # 如果package不存在，就向代理的上游服务器发起请求</span></span>\n<span class="line"><span>    proxy: npmjs</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># To use `npm audit` uncomment the following section</span></span>\n<span class="line"><span>middlewares:</span></span>\n<span class="line"><span>  audit:</span></span>\n<span class="line"><span>    enabled: true</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># 监听端口，重点，不配置这个只能本机可以访问</span></span>\n<span class="line"><span>listen: 0.0.0.0:4873</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># log settings</span></span>\n<span class="line"><span>logs:</span></span>\n<span class="line"><span>  - {type: stdout, format: pretty, level: http}</span></span>\n<span class="line"><span>  #- {type: file, path: verdaccio.log, level: info}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>4.启动 pm2 start verdaccio 这是后就可以通过http://xxx（ip地址）去访问了</p></blockquote><blockquote><p>5.如何使用</p></blockquote><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>#当前npm 服务指向本地 </span></span>\n<span class="line"><span>npm set registry http://localhost:4873</span></span>\n<span class="line"><span># 注册用户 在本地注册一个用户然后指向我们的地址然后我们就可以发布包了</span></span>\n<span class="line"><span>npm adduser --registry http://xxx:4873</span></span>\n<span class="line"><span>Username: xxx</span></span>\n<span class="line"><span>Password: xxx</span></span>\n<span class="line"><span>Password:  xxx</span></span>\n<span class="line"><span>Email: (this IS public) xxx</span></span>\n<span class="line"><span>Logged in as yg-ui on http://xxx/ （你的ip地址）这时候我们就注册一个用户，我们可以用这个用户名和密码去登录去上图窗口去登录</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><h6 id="与私服连接" tabindex="-1"><a class="header-anchor" href="#与私服连接"><span>与私服连接</span></a></h6></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>npm set registry http://xxx：4873 (失败试试：npm config set registry http://xxx:4873 ，然后查看是否配置成功npm config edit）</span></span>\n<span class="line"><span>把下载镜像源的地址切换到从我们的服务器上下载。这里的npmrc文件里面内地址也就会易主</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><h6 id="安装nrm" tabindex="-1"><a class="header-anchor" href="#安装nrm"><span>安装nrm</span></a></h6></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>nrm是 npm registry 管理工具, 能够查看和切换当前使用的registry。不安装也可以，安装会更高效。</span></span>\n<span class="line"><span>1、安装 npm install -g nrm</span></span>\n<span class="line"><span>2、添加私服地址到nrm管理工具</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>3、这里的 yg-ui是我们给自己的私服地址起的别名，为了切换和使用方便。</span></span>\n<span class="line"><span>   nrm add yg-ui http://xxx:4873 成功后如下</span></span>\n<span class="line"><span>     add registry my50 success</span></span>\n<span class="line"><span>4、将npm包的下载地址改到my50的私服。</span></span>\n<span class="line"><span>   nrm use yg-ui 成功后如下</span></span>\n<span class="line"><span>     verb config Skipping project config: /home/yg/.npmrc.</span></span>\n<span class="line"><span>     Registry has been set to: http://xxx:4873/</span></span>\n<span class="line"><span>5、使用nrm ls可查到我们可以使用的所有镜像源地址，* 后面是当前使用的，如果我们不想从私服上下载包，就可以用上一步骤的nrm use命令，use其它的地址，将下载地址改到别的服务器。</span></span>\n<span class="line"><span>   </span></span>\n<span class="line"><span>   输入 nrm ls 成功后如下</span></span>\n<span class="line"><span>   npm ---- https://registry.npmjs.org/</span></span>\n<span class="line"><span>   cnpm --- http://r.cnpmjs.org/</span></span>\n<span class="line"><span>   taobao - https://registry.npm.taobao.org/</span></span>\n<span class="line"><span>   nj ----- https://registry.nodejitsu.com/</span></span>\n<span class="line"><span>   rednpm - http://registry.mirror.cqupt.edu.cn/</span></span>\n<span class="line"><span>   npmMirror  https://skimdb.npmjs.com/registry/</span></span>\n<span class="line"><span>   edunpm - http://registry.enpmjs.org/ </span></span>\n<span class="line"><span>   * yg-ui --- http://xxx:4873/</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>   其实nrm只是个npm registry 管理工具，有了它可以让我们切换和查看registry 地址更方便快捷，即便没有它，我们直接用npm的set命令也可以切换地址，用type命令也可以查看地址，只不过用nrm更便捷，用不用随你了，觉得方便就用。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><h6 id="发布包" tabindex="-1"><a class="header-anchor" href="#发布包"><span>发布包</span></a></h6></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>1、新建一个npmtest 目录，里边放一个文件</span></span>\n<span class="line"><span>2、进入目录 npm init 生成package.json</span></span>\n<span class="line"><span>3、npm publish           # 第二次发包已经切换到我们私服地址的情况下</span></span>\n<span class="line"><span>   npm publish --registry http://xxx:4873   #未切换到我们的私服时，直接加后缀可以发布到私服上。</span></span>\n<span class="line"><span>  第二次发包我们需要npm login 输入用户密码以及邮箱即可（这里需要注意的是</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><h6 id="下载包" tabindex="-1"><a class="header-anchor" href="#下载包"><span>下载包</span></a></h6></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>1、新建.npmrc文件</span></span>\n<span class="line"><span>   registry=http://xxx:4873/#/detail/ui-test</span></span>\n<span class="line"><span>   //xxx/:_authToken=&quot;EF+Q227aTInBu2cvmkDyiozkm/Z/nOz9m1mWK/PlgoA=&quot;</span></span>\n<span class="line"><span>   //localhost:4873/:_authToken=&quot;OTmT9IjKXStdvRwV8RRf6g==&quot;</span></span>\n<span class="line"><span>   package-lock=false</span></span>\n<span class="line"><span>   npm config edit  可以查看到_authToken</span></span>\n<span class="line"><span>2、npm install npmtest --save</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>   这个命令是默认下载当前定位文件夹下package.json文件中需要的所有包，包括其间接依赖的包。第一次下载</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>   之后的包都会缓存在我们的私服上，然后后期下载的时候从私服下载，就不会再从npmjs上下载包，但是它下</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>   载每个包的时候都会再走一遍npmjs去检查包的版本，即便不下载资源，但这无疑也浪费了时间。经验证发</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>   现，我们的package-lock.json文件在此刻起了大作用，因为package-lock.json文件本来就是更新node库后自</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>   动生成的文件，里面包含了node库中所有包的下载地址当前版本以及包之间的依赖关系，既然package-</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>   lock.json稳定了版本，所以当我们项目中包含了这个文件时，我们下包时就会根据package-lock.json的稳定版</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>   本来，就不会再去npmjs上去检查了，这样会极大的提升下载包的速度。所以项目中一定要有稳定的</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>   package.json和package-lock.json文件，并及时更新这两个文件。</span></span>\n<span class="line"><span>   package.json里边配置</span></span>\n<span class="line"><span>   &quot;publishConfig&quot;: {</span></span>\n<span class="line"><span>     &quot;registry&quot;: &quot;http://xxx/repository/npmself/&quot;</span></span>\n<span class="line"><span>   },</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><h6 id="删除包" tabindex="-1"><a class="header-anchor" href="#删除包"><span>删除包</span></a></h6></li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>$ cd /home/yg/.config/verdaccio</span></span>\n<span class="line"><span>$ ls </span></span>\n<span class="line"><span>config.yaml  htpasswd  storage</span></span>\n<span class="line"><span>$ cd storage</span></span>\n<span class="line"><span>$ ls</span></span>\n<span class="line"><span>$ rm -rf  ui-test</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',429),t=[l];function d(p,r){return a(),s("div",null,t)}const o=i(n,[["render",d],["__file","Node基础十二.html.vue"]]),g=JSON.parse('{"path":"/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E5%8D%81%E4%BA%8C.html","title":"Node基础十二","lang":"zh-CN","frontmatter":{"title":"Node基础十二","date":"2022-10-01T12:32:50.000Z","categories":"Node","tags":"Node Node基础系列","pre":"Node基础十一","description":"十二.数据库MySQL 认识数据库 1.1. 为什么要使用数据库 任何的软件系统都需要存放大量的数据，这些数据通常是非常复杂和庞大的： 比如用户信息包括姓名、年龄、性别、地址、身份证号、出生日期等等； 比如商品信息包括商品的名称、描述、价格（原价）、分类标签、商品图片等等； 比如歌曲信息包括歌曲的名称、歌手、专辑、歌曲时长、歌词信息、封面图片等等； 那...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E5%8D%81%E4%BA%8C.html"}],["meta",{"property":"og:site_name","content":"博客"}],["meta",{"property":"og:title","content":"Node基础十二"}],["meta",{"property":"og:description","content":"十二.数据库MySQL 认识数据库 1.1. 为什么要使用数据库 任何的软件系统都需要存放大量的数据，这些数据通常是非常复杂和庞大的： 比如用户信息包括姓名、年龄、性别、地址、身份证号、出生日期等等； 比如商品信息包括商品的名称、描述、价格（原价）、分类标签、商品图片等等； 比如歌曲信息包括歌曲的名称、歌手、专辑、歌曲时长、歌词信息、封面图片等等； 那..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-19T08:58:34.000Z"}],["meta",{"property":"article:author","content":"chriswoodcn"}],["meta",{"property":"article:published_time","content":"2022-10-01T12:32:50.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-19T08:58:34.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Node基础十二\\",\\"image\\":[\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62FK0yMcWgEBjqqcvNQE5dXHvHJ2Irqsics0HJLU1QHsIdtic2q87jicGIw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62icJylNSAM4bk5mZwvSBouI8ymB3xCjQI2OdeE8HPVkAhArR3hIwibc7A/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62CRsYribbzFicIFszSG6EWIJiaiayqDpFkbSyXZbuJUlCQe22MK6oOLXarg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62z39u8qonz5WsGdiaqCQWOf9Y3svcK3ysuzGQz2CUJbdrcoSAZKBKKzw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62k70qPjhYoV4dibEO1AxRRO4qNq9HiavCaTqaCLtHOcdJ3zbbnPEUibCEg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62IWLbUU0kLq8ibkEUHSBFSic3c0eTvDvibq6dZoATVQZzohwPlGozUTuKw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62IvjRm4cLgZbjg3WicrX1DgwMZqDibXjrjpnJA2rrBZ7Uva1ASmrzIm3A/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62fia8L5CT6VjzDPiaRMicezlibbuv0ycFiaIK0egfGXI8iccicPEIbQw1oau3Q/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict622uZ9FyrnvFxMAPrYKJ0AhZtdIIHwHJ8EYyoIVFqDCrzVO9hwjqCoMw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62OrAGbqEib5b6dicGia0rdC6KRFWSTgiciaLIoHXJJIzlxRr82ACWib0KntjA/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62JnpyIGr4tx2hay6FP42FClFbpuWbG8UI6Og3s3wS2ouVa0u0YGAtkg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62EVFibib0GWnial4mhuOACqkFyAX2thes0m5s8g0rrBy2QuOSdUN7ibWG7g/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62NLDWPzECzABc5ZlhoTic2awy2GSPGBMocgIpadOZWa6l9kGnbTnZCMQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62HJmcEAdvA6FpMWTQER7PUkowJnlaYdmhYYZHic6I5XuhMWgHgVh2q7w/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62MRWvtduj4pC1Yt9GvW8JSqmpWzFJJENfoHq4yicxUEz5uELrmTFjMnw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62fViaNPicV44h5ictF9vpLbP0zHic620OjEibibNXnIgKMm5EAaqwg17GKZTQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict621PETJZSaJgOBXKPezvLSOpynauDDn3wRookibBicQwsAQmJeIwkyY16w/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62t3HsvMnYVHy4GCDf3vJPwvOm3zxDMvbGXcNJcCp9dvgXkicArXOvoKg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62L8Ye2kbuDjWjdJGVgkarUaxoNDbdrtXM6Y2RcfYUQLwbjDN5vbbdNg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62s4NqCyOHNHzI33dvsnSaKZmI3FeOoGvmwUpL1ric8ibYZCl8xiawqGVfg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62ib7r5wOcXJmB58QP8ERVO3TCwV0ft7wEfHibfQ2Wvh7YKibJQdsSnXcGw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62mWOib1xbOuvoQUlV8paKuIgqzyp1SnGTetngQiavKSj5DUwabkJibsWfQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62hAq5L2QQXPu7HZJG7oM9JAmR92pSJBsvlmKIE8D1s8DtUJLthJWoNg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict627x26F7vljAQ0icOfTINFSqFhoAAT0rQgadHCuPHPvTBmnnElCAl3rnQ/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvdojjKnD58NF714kccict62q9MKZf1ENmyg00mlTLh9kSnLODiaBSia8h2jPicMib9eZFmDcXibp4IJROw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\",\\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\\"],\\"datePublished\\":\\"2022-10-01T12:32:50.000Z\\",\\"dateModified\\":\\"2024-06-19T08:58:34.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"chriswoodcn\\"}]}"]]},"headers":[{"level":2,"title":"十二.数据库MySQL","slug":"十二-数据库mysql","link":"#十二-数据库mysql","children":[]},{"level":2,"title":"认识数据库","slug":"认识数据库","link":"#认识数据库","children":[{"level":3,"title":"1.1. 为什么要使用数据库","slug":"_1-1-为什么要使用数据库","link":"#_1-1-为什么要使用数据库","children":[]},{"level":3,"title":"1.2. 常见的数据库有哪些？","slug":"_1-2-常见的数据库有哪些","link":"#_1-2-常见的数据库有哪些","children":[]},{"level":3,"title":"1.3. MySQL的下载和安装","slug":"_1-3-mysql的下载和安装","link":"#_1-3-mysql的下载和安装","children":[]},{"level":3,"title":"1.4. mysql的连接和操作","slug":"_1-4-mysql的连接和操作","link":"#_1-4-mysql的连接和操作","children":[]},{"level":3,"title":"1.5. GUI工具操作数据库","slug":"_1-5-gui工具操作数据库","link":"#_1-5-gui工具操作数据库","children":[]}]},{"level":2,"title":"SQL语句","slug":"sql语句","link":"#sql语句","children":[{"level":3,"title":"2.1. 认识SQL语句","slug":"_2-1-认识sql语句","link":"#_2-1-认识sql语句","children":[]},{"level":3,"title":"2.2. DDL语句","slug":"_2-2-ddl语句","link":"#_2-2-ddl语句","children":[]},{"level":3,"title":"2.3. 创建表细节","slug":"_2-3-创建表细节","link":"#_2-3-创建表细节","children":[]},{"level":3,"title":"2.3. DML语句","slug":"_2-3-dml语句","link":"#_2-3-dml语句","children":[]},{"level":3,"title":"2.4. DQL语句","slug":"_2-4-dql语句","link":"#_2-4-dql语句","children":[]},{"level":3,"title":"2.5. 外键约束","slug":"_2-5-外键约束","link":"#_2-5-外键约束","children":[]},{"level":3,"title":"2.6. 多表查询","slug":"_2-6-多表查询","link":"#_2-6-多表查询","children":[]},{"level":3,"title":"2.7. 多对多关系","slug":"_2-7-多对多关系","link":"#_2-7-多对多关系","children":[]}]},{"level":2,"title":"Node操作MySQL","slug":"node操作mysql","link":"#node操作mysql","children":[{"level":3,"title":"3.1.对象和数组","slug":"_3-1-对象和数组","link":"#_3-1-对象和数组","children":[]},{"level":3,"title":"3.2. mysql2的使用","slug":"_3-2-mysql2的使用","link":"#_3-2-mysql2的使用","children":[]},{"level":3,"title":"3.3. ORM的sequelize","slug":"_3-3-orm的sequelize","link":"#_3-3-orm的sequelize","children":[]},{"level":3,"title":"http请求与响应处理","slug":"http请求与响应处理","link":"#http请求与响应处理","children":[]},{"level":3,"title":"window释放端口","slug":"window释放端口","link":"#window释放端口","children":[]}]},{"level":2,"title":"npm常用命令","slug":"npm常用命令","link":"#npm常用命令","children":[]},{"level":2,"title":"NPM私库搭建","slug":"npm私库搭建","link":"#npm私库搭建","children":[{"level":3,"title":"npm+git","slug":"npm-git","link":"#npm-git","children":[]},{"level":3,"title":"云服务器安装node环境,nginx","slug":"云服务器安装node环境-nginx","link":"#云服务器安装node环境-nginx","children":[]}]}],"git":{"createdTime":1718787514000,"updatedTime":1718787514000,"contributors":[{"name":"chriswoodcn","email":"chriswoodcn@aliyun.com","commits":1}]},"readingTime":{"minutes":41.04,"words":12312},"filePathRelative":"zh/posts/node/base/Node基础十二.md","localizedDate":"2022年10月1日","excerpt":"<h2>十二.数据库MySQL</h2>\\n<h2>认识数据库</h2>\\n<h3>1.1. 为什么要使用数据库</h3>\\n<p>任何的软件系统都需要存放大量的数据，这些数据通常是非常复杂和庞大的：</p>\\n<ul>\\n<li>比如用户信息包括姓名、年龄、性别、地址、身份证号、出生日期等等；</li>\\n<li>比如商品信息包括商品的名称、描述、价格（原价）、分类标签、商品图片等等；</li>\\n<li>比如歌曲信息包括歌曲的名称、歌手、专辑、歌曲时长、歌词信息、封面图片等等；</li>\\n</ul>\\n<p>那么这些信息不能直接存储到文件中吗？可以，但是文件系统有很多的缺点：</p>\\n<ul>\\n<li>很难以合适的方式组织数据（多张表之前的关系合理组织）；</li>\\n<li>并且对数据进行增删改查中的复杂操作（虽然一些简单确实可以），并且保证单操作的原子性；</li>\\n<li>很难进行数据共享，比如一个数据库需要为多个程序服务，如何进行很好的数据共享；</li>\\n<li>需要考虑如何进行数据的高效备份、迁移、恢复；</li>\\n<li>等等...</li>\\n</ul>","autoDesc":true}');export{o as comp,g as data};
