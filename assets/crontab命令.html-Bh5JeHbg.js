import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as n,b as a}from"./app-D5FmEbjh.js";const e={},t=a(`<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>crontab命令常见于Unix和类Unix的操作系统之中，用于设置周期性被执行的指令。该命令从标准输入设备读取指令， 并将其存放于“crontab”文件中（是“cron table”的简写）</p><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h2><h3 id="检查crontab服务" tabindex="-1"><a class="header-anchor" href="#检查crontab服务"><span>检查crontab服务</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">crontab</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -l</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#显示‘no crontab for root’ 或者 当前的任务列表 或者 不报错 说明已经安装</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="安装crontab服务" tabindex="-1"><a class="header-anchor" href="#安装crontab服务"><span>安装crontab服务</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#centOS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> vixie-cron</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crontabs</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">#ubuntu</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cron</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cron-服务的启动与关闭" tabindex="-1"><a class="header-anchor" href="#cron-服务的启动与关闭"><span>cron 服务的启动与关闭</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># centOS</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 查看cond 状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> status</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 启动cron</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> start</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 关闭cron</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> stop</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 重启cron</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> crond</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># ubuntu</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 查看cond 状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cron</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> status</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 启动cron</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cron</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> start</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 关闭cron</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cron</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> stop</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 重启cron</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cron</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="crontab命令" tabindex="-1"><a class="header-anchor" href="#crontab命令"><span>crontab命令</span></a></h3><p>通过crontab命令，我们可以在固定的间隔时间执行指定的系统指令或 shell script脚本。时间间隔的单位可以是 分钟、小时、日、月、周及以上的任意组合。这个命令非常设合周期性的日志分析或数据备份等工作。</p><h4 id="crontab命令格式" tabindex="-1"><a class="header-anchor" href="#crontab命令格式"><span>crontab命令格式</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>crontab [-u user] file</span></span>
<span class="line"><span>crontab [-u user] [ -e | -l | -r ]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-u user：用来设定某个用户的crontab服务，例如，“-u ixdba”表示设定ixdba用户的crontab服务，此参数一般有root用户来运行。</span></span>
<span class="line"><span>file：file是命令文件的名字,表示将file做为crontab的任务列表文件并载入crontab。如果在命令行中没有指定这个文件，crontab命令将接受标准输入（键盘）上键入的命令，并将它们载入crontab。</span></span>
<span class="line"><span>-e：编辑某个用户的crontab文件内容。如果不指定用户，则表示编辑当前用户的crontab文件。</span></span>
<span class="line"><span>-l：显示某个用户的crontab文件内容，如果不指定用户，则表示显示当前用户的crontab文件内容。</span></span>
<span class="line"><span>-r：从/var/spool/cron目录中删除某个用户的crontab文件，如果不指定用户，则默认删除当前用户的crontab文件。</span></span>
<span class="line"><span>-i：在删除用户的crontab文件时给确认提示。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="crontab文件格式" tabindex="-1"><a class="header-anchor" href="#crontab文件格式"><span>crontab文件格式</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>minute   hour   day   month   week   command</span></span>
<span class="line"><span># Example of job definition:</span></span>
<span class="line"><span>.---------------------------------- minute (0 - 59) 表示分钟</span></span>
<span class="line"><span>|  .------------------------------- hour (0 - 23)   表示小时</span></span>
<span class="line"><span>|  |  .---------------------------- day of month (1 - 31)   表示日期</span></span>
<span class="line"><span>|  |  |  .------------------------- month (1 - 12) OR jan,feb,mar,apr ... 表示月份</span></span>
<span class="line"><span>|  |  |  |  .---------------------- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat  表示星期（0 或 7 表示星期天）</span></span>
<span class="line"><span>|  |  |  |  |  .------------------- username  以哪个用户来执行 </span></span>
<span class="line"><span>|  |  |  |  |  |            .------ command  要执行的命令，可以是系统命令，也可以是自己编写的脚本文件</span></span>
<span class="line"><span>|  |  |  |  |  |            |</span></span>
<span class="line"><span>*  *  *  *  * user-name  command to be executed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>*/1 * * * * service httpd restart	               每一分钟 重启httpd服务</span></span>
<span class="line"><span>0 */1 * * * service httpd restart	               每一小时 重启httpd服务</span></span>
<span class="line"><span>30 21 * * * service httpd restart	               每天 21：30 分 重启httpd服务</span></span>
<span class="line"><span>26 4 1,5,23,28 * * service httpd restart	       每月的1号，5号 23 号 28 号 的4点26分，重启httpd服务</span></span>
<span class="line"><span>26 4 1-21 * * service httpd restart	               每月的1号到21号 的4点26分，重启httpd服务</span></span>
<span class="line"><span>*/2 * * * * service httpd restart	               每隔两分钟 执行，偶数分钟 重启httpd服务</span></span>
<span class="line"><span>1-59/2 * * * * service httpd restart	           每隔两分钟 执行，奇数 重启httpd服务</span></span>
<span class="line"><span>0 23-7/1 * * * service httpd restart	           每天的晚上11点到早上7点 每隔一个小时 重启httpd服务</span></span>
<span class="line"><span>0,30 18-23 * * * service httpd restart	           每天18点到23点 每隔30分钟 重启httpd服务</span></span>
<span class="line"><span>0-59/30 18-23 * * * service httpd restart	       每天18点到23点 每隔30分钟 重启httpd服务</span></span>
<span class="line"><span>59 1 1-7 4 0 /root/a.sh                            四月的第一个星期日 01:59 分运行脚本 /root/a.sh</span></span>
<span class="line"><span></span></span>
<span class="line"><span>*表示任何时候都匹配</span></span>
<span class="line"><span>&quot;a,b,c&quot; 表示a 或者 b 或者c 执行命令</span></span>
<span class="line"><span>&quot;a-b&quot; 表示a到b 之间 执行命令</span></span>
<span class="line"><span>&quot;*/a&quot; 表示每 a单位 执行一次</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="crontab配置文件" tabindex="-1"><a class="header-anchor" href="#crontab配置文件"><span>crontab配置文件</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>/etc/crontab	     全局配置文件</span></span>
<span class="line"><span>/etc/cron.d	         这个目录用来存放任何要执行的crontab文件或脚本</span></span>
<span class="line"><span>/etc/cron.deny	     该文件中所列用户不允许使用crontab命令</span></span>
<span class="line"><span>/etc/cron.allow	     该文件中所列用户允许使用crontab命令</span></span>
<span class="line"><span>/var/spool/cron/	 所有用户crontab文件存放的目录,以用户名命名，比如你是root 用户，那么当你添加任务是，就会在该路径下有一个root文件。</span></span>
<span class="line"><span>/etc/cron.deny	     该文件中所列用户不允许使用crontab命令</span></span>
<span class="line"><span>/var/log/cron	     crontab的日志文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h3><ol><li>环境变量的值，在crontab文件中获取不到，可以写脚本替代</li><li>在crontab中%是有特殊含义的，表示换行的意思。如果要用的话必须进行转义%</li></ol>`,21),l=[t];function r(h,p){return n(),i("div",null,l)}const o=s(e,[["render",r],["__file","crontab命令.html.vue"]]),k=JSON.parse('{"path":"/zh/posts/linux/crontab%E5%91%BD%E4%BB%A4.html","title":"crontab命令","lang":"zh-CN","frontmatter":{"title":"crontab命令","categories":"Linux","tags":["Linux","crontab"],"date":"2023-06-20T09:58:10.000Z","description":"简介 crontab命令常见于Unix和类Unix的操作系统之中，用于设置周期性被执行的指令。该命令从标准输入设备读取指令， 并将其存放于“crontab”文件中（是“cron table”的简写） 使用 检查crontab服务 安装crontab服务 cron 服务的启动与关闭 crontab命令 通过crontab命令，我们可以在固定的间隔时间执行...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/zh/posts/linux/crontab%E5%91%BD%E4%BB%A4.html"}],["meta",{"property":"og:site_name","content":"博客"}],["meta",{"property":"og:title","content":"crontab命令"}],["meta",{"property":"og:description","content":"简介 crontab命令常见于Unix和类Unix的操作系统之中，用于设置周期性被执行的指令。该命令从标准输入设备读取指令， 并将其存放于“crontab”文件中（是“cron table”的简写） 使用 检查crontab服务 安装crontab服务 cron 服务的启动与关闭 crontab命令 通过crontab命令，我们可以在固定的间隔时间执行..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-19T08:58:34.000Z"}],["meta",{"property":"article:author","content":"chriswoodcn"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:tag","content":"crontab"}],["meta",{"property":"article:published_time","content":"2023-06-20T09:58:10.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-19T08:58:34.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"crontab命令\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-06-20T09:58:10.000Z\\",\\"dateModified\\":\\"2024-06-19T08:58:34.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"chriswoodcn\\"}]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"使用","slug":"使用","link":"#使用","children":[{"level":3,"title":"检查crontab服务","slug":"检查crontab服务","link":"#检查crontab服务","children":[]},{"level":3,"title":"crontab命令","slug":"crontab命令","link":"#crontab命令","children":[]},{"level":3,"title":"注意事项","slug":"注意事项","link":"#注意事项","children":[]}]}],"git":{"createdTime":1718787514000,"updatedTime":1718787514000,"contributors":[{"name":"chriswoodcn","email":"chriswoodcn@aliyun.com","commits":1}]},"readingTime":{"minutes":3.8,"words":1139},"filePathRelative":"zh/posts/linux/crontab命令.md","localizedDate":"2023年6月20日","excerpt":"<h2>简介</h2>\\n<p>crontab命令常见于Unix和类Unix的操作系统之中，用于设置周期性被执行的指令。该命令从标准输入设备读取指令，\\n并将其存放于“crontab”文件中（是“cron table”的简写）</p>\\n<h2>使用</h2>\\n<h3>检查crontab服务</h3>\\n<div class=\\"language-shell line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"shell\\" data-title=\\"shell\\" style=\\"--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes github-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">crontab</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -l</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic\\">#显示‘no crontab for root’ 或者 当前的任务列表 或者 不报错 说明已经安装</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{o as comp,k as data};
