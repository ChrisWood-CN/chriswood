<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.13" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.49" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://mister-hope.github.io/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%B8%83.html"><meta property="og:site_name" content="博客"><meta property="og:title" content="Node基础七"><meta property="og:description" content="七.脚手架开发 目前前端工程化开发过程中，我们会使用各种各样的脚手架，vue-cli、create-react-app，当然也包括webpack、gulp、rollup、vite等工具。 这些工具是怎么开发出来的呢？当我们执行一个命令时，它们做了什么事情？是怎么样完成的一系列操作？ 这里我开发了一个coderwhy的脚手架：一个帮助你快速搭建和开发前端..."><meta property="og:type" content="article"><meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvsfCKCtp2lQ6qFNLhNLWZicFXVpMZmib38NiaDoibicwJyAY4TJOGiaGHtMicVRibkb1zkwYFtAZsPgKma1Q/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-06-19T08:58:34.000Z"><meta property="article:author" content="chriswoodcn"><meta property="article:published_time" content="2022-10-01T12:27:50.000Z"><meta property="article:modified_time" content="2024-06-19T08:58:34.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Node基础七","image":["https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvsfCKCtp2lQ6qFNLhNLWZicFXVpMZmib38NiaDoibicwJyAY4TJOGiaGHtMicVRibkb1zkwYFtAZsPgKma1Q/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1"],"datePublished":"2022-10-01T12:27:50.000Z","dateModified":"2024-06-19T08:58:34.000Z","author":[{"@type":"Person","name":"chriswoodcn"}]}</script><title>Node基础七 | 博客</title><meta name="description" content="七.脚手架开发 目前前端工程化开发过程中，我们会使用各种各样的脚手架，vue-cli、create-react-app，当然也包括webpack、gulp、rollup、vite等工具。 这些工具是怎么开发出来的呢？当我们执行一个命令时，它们做了什么事情？是怎么样完成的一系列操作？ 这里我开发了一个coderwhy的脚手架：一个帮助你快速搭建和开发前端...">
    <link rel="preload" href="/assets/style-CttBTjk0.css" as="style"><link rel="stylesheet" href="/assets/style-CttBTjk0.css">
    <link rel="modulepreload" href="/assets/app-D5FmEbjh.js"><link rel="modulepreload" href="/assets/Node基础七.html-D-Ru6WGr.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-CUF_ax2Y.js" as="script"><link rel="prefetch" href="/assets/intro.html-D66Ug9Th.js" as="script"><link rel="prefetch" href="/assets/index.html-B9g9GQx7.js" as="script"><link rel="prefetch" href="/assets/intro.html-6BfYLdN7.js" as="script"><link rel="prefetch" href="/assets/开发环境配置.html-DsR6097-.js" as="script"><link rel="prefetch" href="/assets/docker-compose.html-BC-dWHS2.js" as="script"><link rel="prefetch" href="/assets/docker-entrypoint.sh脚本.html-DIukhAj6.js" as="script"><link rel="prefetch" href="/assets/docker-repository.html-Dbg9Li_T.js" as="script"><link rel="prefetch" href="/assets/docker安装及CA证书制作.html-BkK50z2Y.js" as="script"><link rel="prefetch" href="/assets/docker环境部署集群前后端分离项目.html-DF31FA7N.js" as="script"><link rel="prefetch" href="/assets/docker镜像构建方式.html-C9nzCSxN.js" as="script"><link rel="prefetch" href="/assets/gradle环境配置.html-38kCJEGf.js" as="script"><link rel="prefetch" href="/assets/docker部署hbase.html-_LiCRJNZ.js" as="script"><link rel="prefetch" href="/assets/EditorConfig配置.html-DGe7TAMB.js" as="script"><link rel="prefetch" href="/assets/docker部署kafka集群.html-Cb2tZ6Qd.js" as="script"><link rel="prefetch" href="/assets/kafka学习.html-CdO5TFhb.js" as="script"><link rel="prefetch" href="/assets/helm部署应用合集.html-2r0ave4v.js" as="script"><link rel="prefetch" href="/assets/istio入门.html-CcS023hU.js" as="script"><link rel="prefetch" href="/assets/istio配置.html-DP2HbqBh.js" as="script"><link rel="prefetch" href="/assets/k3s部署rancher.html-D_EwmH10.js" as="script"><link rel="prefetch" href="/assets/kubeadmin搭建k8s.html--TXpS1jW.js" as="script"><link rel="prefetch" href="/assets/kubectl多集群环境切换.html-DBIdr_Xi.js" as="script"><link rel="prefetch" href="/assets/kubernetes安装dashboard.html-fOVm2uh9.js" as="script"><link rel="prefetch" href="/assets/kubernetes常用模板.html-CBxHBcHF.js" as="script"><link rel="prefetch" href="/assets/kubernetes阿里云应用方式.html-Ci1L2LjV.js" as="script"><link rel="prefetch" href="/assets/Linux-iptables学习.html-DtAjGpTF.js" as="script"><link rel="prefetch" href="/assets/Linux上ssh证书登录配置.html-Bla3gLge.js" as="script"><link rel="prefetch" href="/assets/centos7.html-D_9sydsl.js" as="script"><link rel="prefetch" href="/assets/crontab命令.html-Bh5JeHbg.js" as="script"><link rel="prefetch" href="/assets/shell脚本编辑.html-C1cWRWeF.js" as="script"><link rel="prefetch" href="/assets/Nginx常用操作及配置.html-D5tFUI1q.js" as="script"><link rel="prefetch" href="/assets/Nginx日志按天切割.html-CHXcVNjk.js" as="script"><link rel="prefetch" href="/assets/springboot日志配置.html-D-yeGnt4.js" as="script"><link rel="prefetch" href="/assets/springboot配置文件.html-CsgfGRcG.js" as="script"><link rel="prefetch" href="/assets/md数学公式编辑.html-t18rRRnP.js" as="script"><link rel="prefetch" href="/assets/batch命令.html-BzWtoTa-.js" as="script"><link rel="prefetch" href="/assets/SuppressWarnings注解.html-Bp-UeaYZ.js" as="script"><link rel="prefetch" href="/assets/Java高并发专题-JUC线程池.html-Cl7zXvJS.js" as="script"><link rel="prefetch" href="/assets/maven项目pom-xml配置说明.html-DFxOXwO0.js" as="script"><link rel="prefetch" href="/assets/RedisTemplate的opsFor操作.html-qpdx3SNY.js" as="script"><link rel="prefetch" href="/assets/核心词汇.html-HdoSKMMt.js" as="script"><link rel="prefetch" href="/assets/英语词根词缀整理.html-ekpnMOiR.js" as="script"><link rel="prefetch" href="/assets/英语语法.html-Cw-e2822.js" as="script"><link rel="prefetch" href="/assets/线性代数.html-_FWkQ1QG.js" as="script"><link rel="prefetch" href="/assets/高等数学.html-BoJQb-KZ.js" as="script"><link rel="prefetch" href="/assets/思修法基.html-B1etZ5Wz.js" as="script"><link rel="prefetch" href="/assets/毛中特.html-CiaRkCq9.js" as="script"><link rel="prefetch" href="/assets/近代史.html-BvECXQEt.js" as="script"><link rel="prefetch" href="/assets/马克思主义基本原理.html-Dc07EsL9.js" as="script"><link rel="prefetch" href="/assets/Mysql基础.html-CQxRhfFm.js" as="script"><link rel="prefetch" href="/assets/Node基础一.html-brh-6_94.js" as="script"><link rel="prefetch" href="/assets/Node基础三.html-Mpu8q1wO.js" as="script"><link rel="prefetch" href="/assets/Node基础九.html-DfHod_y8.js" as="script"><link rel="prefetch" href="/assets/Node基础二.html-C7xSKsjz.js" as="script"><link rel="prefetch" href="/assets/Node基础五.html-qFA0xw95.js" as="script"><link rel="prefetch" href="/assets/Node基础八.html-RGYueHrh.js" as="script"><link rel="prefetch" href="/assets/Node基础六.html-BUGYPZys.js" as="script"><link rel="prefetch" href="/assets/Node基础十.html-Daghm1Uo.js" as="script"><link rel="prefetch" href="/assets/Node基础十一.html-BciERlUu.js" as="script"><link rel="prefetch" href="/assets/Node基础十二.html-kxq36j_U.js" as="script"><link rel="prefetch" href="/assets/Node基础四.html-CLnqDMo5.js" as="script"><link rel="prefetch" href="/assets/404.html-BfRh8sRb.js" as="script"><link rel="prefetch" href="/assets/index.html-B01C2z4a.js" as="script"><link rel="prefetch" href="/assets/index.html-BfllFIRj.js" as="script"><link rel="prefetch" href="/assets/index.html-BuSrjSOF.js" as="script"><link rel="prefetch" href="/assets/index.html-C4ac6vRb.js" as="script"><link rel="prefetch" href="/assets/index.html-VQc2B6py.js" as="script"><link rel="prefetch" href="/assets/index.html-RP_cFOyh.js" as="script"><link rel="prefetch" href="/assets/index.html-B3f9sixU.js" as="script"><link rel="prefetch" href="/assets/index.html-CO60xkpf.js" as="script"><link rel="prefetch" href="/assets/index.html-CM8INg0g.js" as="script"><link rel="prefetch" href="/assets/index.html-1R8xn9Y-.js" as="script"><link rel="prefetch" href="/assets/index.html-COxbJVUF.js" as="script"><link rel="prefetch" href="/assets/index.html-eH_ARX_4.js" as="script"><link rel="prefetch" href="/assets/index.html-CDcQwgVY.js" as="script"><link rel="prefetch" href="/assets/index.html-DCK8oFc6.js" as="script"><link rel="prefetch" href="/assets/index.html-B7iW4HLz.js" as="script"><link rel="prefetch" href="/assets/index.html-RUutp3aL.js" as="script"><link rel="prefetch" href="/assets/index.html-B6rY6HMp.js" as="script"><link rel="prefetch" href="/assets/index.html-HQba7xZf.js" as="script"><link rel="prefetch" href="/assets/index.html-CS8k5DKg.js" as="script"><link rel="prefetch" href="/assets/index.html-D-WddM_d.js" as="script"><link rel="prefetch" href="/assets/index.html-CeYqPii-.js" as="script"><link rel="prefetch" href="/assets/index.html-D1EEL4Rx.js" as="script"><link rel="prefetch" href="/assets/index.html-EB1VOCPa.js" as="script"><link rel="prefetch" href="/assets/index.html-D1XHT_8X.js" as="script"><link rel="prefetch" href="/assets/index.html-BVz-ePfg.js" as="script"><link rel="prefetch" href="/assets/index.html-C0D8FK7J.js" as="script"><link rel="prefetch" href="/assets/index.html-B5bHMGOI.js" as="script"><link rel="prefetch" href="/assets/index.html-Bm0pNnrg.js" as="script"><link rel="prefetch" href="/assets/index.html-DrNvM5Gj.js" as="script"><link rel="prefetch" href="/assets/index.html-CCaSVVxH.js" as="script"><link rel="prefetch" href="/assets/index.html-PYaaJV6v.js" as="script"><link rel="prefetch" href="/assets/index.html-BwovP960.js" as="script"><link rel="prefetch" href="/assets/index.html-CNLC40X0.js" as="script"><link rel="prefetch" href="/assets/index.html-CSAwbJOb.js" as="script"><link rel="prefetch" href="/assets/index.html-C7vkyTA8.js" as="script"><link rel="prefetch" href="/assets/index.html-Ci8kMxU5.js" as="script"><link rel="prefetch" href="/assets/index.html-Cnn01Wii.js" as="script"><link rel="prefetch" href="/assets/index.html-DvKoPLD0.js" as="script"><link rel="prefetch" href="/assets/index.html-Cvio-1qf.js" as="script"><link rel="prefetch" href="/assets/index.html-DsGRmqin.js" as="script"><link rel="prefetch" href="/assets/index.html-CiAzbHgB.js" as="script"><link rel="prefetch" href="/assets/index.html-jSvQ2CnX.js" as="script"><link rel="prefetch" href="/assets/index.html-CO_H-r9n.js" as="script"><link rel="prefetch" href="/assets/index.html-DiFS9QQl.js" as="script"><link rel="prefetch" href="/assets/index.html-6DGRoYx3.js" as="script"><link rel="prefetch" href="/assets/index.html-Btr5Rssu.js" as="script"><link rel="prefetch" href="/assets/index.html-BtsgIik3.js" as="script"><link rel="prefetch" href="/assets/index.html-CVfAkEqY.js" as="script"><link rel="prefetch" href="/assets/index.html-z81w1qX4.js" as="script"><link rel="prefetch" href="/assets/index.html-CwzUqRud.js" as="script"><link rel="prefetch" href="/assets/index.html-B82eMj67.js" as="script"><link rel="prefetch" href="/assets/index.html-CX6qYdoa.js" as="script"><link rel="prefetch" href="/assets/index.html-C-psxKM4.js" as="script"><link rel="prefetch" href="/assets/index.html-DFi1CHsv.js" as="script"><link rel="prefetch" href="/assets/index.html-B7Ghw5di.js" as="script"><link rel="prefetch" href="/assets/index.html-DwXkZJFc.js" as="script"><link rel="prefetch" href="/assets/index.html-DTf2Gjef.js" as="script"><link rel="prefetch" href="/assets/index.html-nDvUr-KU.js" as="script"><link rel="prefetch" href="/assets/index.html-CZQkb5jd.js" as="script"><link rel="prefetch" href="/assets/index.html-BI3xxJaa.js" as="script"><link rel="prefetch" href="/assets/index.html-CRrbG92H.js" as="script"><link rel="prefetch" href="/assets/index.html-WS-ml32e.js" as="script"><link rel="prefetch" href="/assets/index.html-DEpPjeyi.js" as="script"><link rel="prefetch" href="/assets/index.html-vg6chEM9.js" as="script"><link rel="prefetch" href="/assets/index.html-COvUmhT9.js" as="script"><link rel="prefetch" href="/assets/index.html-C5G9Qoud.js" as="script"><link rel="prefetch" href="/assets/index.html-BYlCcXig.js" as="script"><link rel="prefetch" href="/assets/index.html-y6ZnNVUL.js" as="script"><link rel="prefetch" href="/assets/index.html-auQDVCEh.js" as="script"><link rel="prefetch" href="/assets/index.html-B5IrdCiU.js" as="script"><link rel="prefetch" href="/assets/index.html-Du0Hoakd.js" as="script"><link rel="prefetch" href="/assets/index.html-Dba8WVWv.js" as="script"><link rel="prefetch" href="/assets/index.html-BU1JVZCC.js" as="script"><link rel="prefetch" href="/assets/index.html-rPMSrx1d.js" as="script"><link rel="prefetch" href="/assets/index.html-CXLJjsOn.js" as="script"><link rel="prefetch" href="/assets/index.html-B_QOJnPB.js" as="script"><link rel="prefetch" href="/assets/index.html-B6IG0aup.js" as="script"><link rel="prefetch" href="/assets/index.html-CFluBX1t.js" as="script"><link rel="prefetch" href="/assets/index.html-BHL5giY-.js" as="script"><link rel="prefetch" href="/assets/index.html-CnEZhXUg.js" as="script"><link rel="prefetch" href="/assets/index.html-BH7iT4-c.js" as="script"><link rel="prefetch" href="/assets/index.html-D53Imsic.js" as="script"><link rel="prefetch" href="/assets/index.html-Bvs26t2T.js" as="script"><link rel="prefetch" href="/assets/index.html-D6VLw5P8.js" as="script"><link rel="prefetch" href="/assets/index.html-I8MIkTU_.js" as="script"><link rel="prefetch" href="/assets/index.html-BZKLplPZ.js" as="script"><link rel="prefetch" href="/assets/index.html-CVidv9bU.js" as="script"><link rel="prefetch" href="/assets/index.html-DFi1CHsv.js" as="script"><link rel="prefetch" href="/assets/index.html-DwfIpKdp.js" as="script"><link rel="prefetch" href="/assets/index.html-H28CTmil.js" as="script"><link rel="prefetch" href="/assets/index.html-QUiGg-U0.js" as="script"><link rel="prefetch" href="/assets/index.html-W05ukw4X.js" as="script"><link rel="prefetch" href="/assets/index.html-rQm45BTL.js" as="script"><link rel="prefetch" href="/assets/index.html-CBj2MnTl.js" as="script"><link rel="prefetch" href="/assets/index.html-C2nBaegJ.js" as="script"><link rel="prefetch" href="/assets/index.html-UxnNt3ti.js" as="script"><link rel="prefetch" href="/assets/index.html-DMF79x9b.js" as="script"><link rel="prefetch" href="/assets/index.html-qBUcWRi6.js" as="script"><link rel="prefetch" href="/assets/index.html-Bbndowb_.js" as="script"><link rel="prefetch" href="/assets/index.html-CvP5by6q.js" as="script"><link rel="prefetch" href="/assets/index.html-DhvZqaeb.js" as="script"><link rel="prefetch" href="/assets/index.html-CSv-bn9i.js" as="script"><link rel="prefetch" href="/assets/index.html-CSNcmyZN.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/SearchResult-QVdWgE2v.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/zh/"><img class="vp-nav-logo" src="/logo.png" alt><!----><span class="vp-site-name hide-in-pad">博客</span></a><!--[--><button type="button" class="search-pro-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----></div><div class="vp-navbar-center"><!----><!----><!----></div><div class="vp-navbar-end"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/zh/" aria-label="主页"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="home" width="1em" height="1em"></iconify-icon><!--]-->主页<!----></a></div></nav><div class="vp-nav-item"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" name="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/" aria-label="English"><!---->English<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%B8%83.html" aria-label="简体中文"><!---->简体中文<!----></a></li></ul></button></div></div><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/" aria-label="主页"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="home" width="1em" height="1em"></iconify-icon><!--]-->主页<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="laptop-code" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/zh/demo/" aria-label="如何使用"><!---->如何使用<!----></a><!----></p><ul class="vp-sidebar-links"></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><iconify-icon class="font-icon icon" style="" mode="style" inline icon="book" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">文章</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Env</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Gradle</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Hbase</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ide</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Kafka</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Kubernetes</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linux</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Master</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Mysql</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Nginx</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Node</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Base</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%B8%80.html" aria-label="Node基础一"><!---->Node基础一<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%B8%83.html" aria-label="Node基础七"><!---->Node基础七<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%B8%89.html" aria-label="Node基础三"><!---->Node基础三<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%B9%9D.html" aria-label="Node基础九"><!---->Node基础九<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%BA%8C.html" aria-label="Node基础二"><!---->Node基础二<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%BA%94.html" aria-label="Node基础五"><!---->Node基础五<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E5%85%AB.html" aria-label="Node基础八"><!---->Node基础八<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E5%85%AD.html" aria-label="Node基础六"><!---->Node基础六<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E5%8D%81.html" aria-label="Node基础十"><!---->Node基础十<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E5%8D%81%E4%B8%80.html" aria-label="Node基础十一"><!---->Node基础十一<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E5%8D%81%E4%BA%8C.html" aria-label="Node基础十二"><!---->Node基础十二<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E5%9B%9B.html" aria-label="Node基础四"><!---->Node基础四<!----></a></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Springboot</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Tools</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Windows</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/intro.html" aria-label="介绍页"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="circle-info" width="1em" height="1em"></iconify-icon><!--]-->介绍页<!----></a></li><li><a class="auto-link external-link vp-sidebar-link" href="https://plugin-md-enhance.vuejs.press/zh/guide/content/revealjs/demo.html" aria-label="幻灯片" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="person-chalkboard" width="1em" height="1em"></iconify-icon><!--]-->幻灯片<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Node基础七</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">chriswoodcn</span></span><span property="author" content="chriswoodcn"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-10-01T12:27:50.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 9 分钟</span><meta property="timeRequired" content="PT9M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color3 clickable" role="navigation">Node</span><!--]--><meta property="articleSection" content="Node"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color4 clickable" role="navigation">Node Node基础系列</span><!--]--><meta property="keywords" content="Node Node基础系列"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#七-脚手架开发">七.脚手架开发</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#使用说明">使用说明</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#一-创建项目">一. 创建项目</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#二-项目开发">二. 项目开发</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#脚手架开发过程">脚手架开发过程</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#一-创建文件">一. 创建文件</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#二-创建coderwhy的命令">二. 创建coderwhy的命令</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#三-commander用法">三. commander用法</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#四-创建项目指令">四. 创建项目指令</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#五-添加组件指令">五. 添加组件指令</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#六-发布工具">六. 发布工具</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h2 id="七-脚手架开发" tabindex="-1"><a class="header-anchor" href="#七-脚手架开发"><span>七.脚手架开发</span></a></h2><p>目前前端工程化开发过程中，我们会使用各种各样的脚手架，vue-cli、create-react-app，当然也包括webpack、gulp、rollup、vite等工具。</p><p>这些工具是怎么开发出来的呢？当我们执行一个命令时，它们做了什么事情？是怎么样完成的一系列操作？</p><p>这里我开发了一个coderwhy的脚手架：一个帮助你快速搭建和开发前端项目的CLI。</p><p>文档内容分成两部分：</p><p>第一部分：coderwhy使用说明；</p><p>第二部分：coderwhy脚手架开发过程；</p><p>如何安装？</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>npm install coderwhy -g</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="使用说明" tabindex="-1"><a class="header-anchor" href="#使用说明"><span>使用说明</span></a></h3><h3 id="一-创建项目" tabindex="-1"><a class="header-anchor" href="#一-创建项目"><span>一. 创建项目</span></a></h3><p>目前支持Vue，后期会支持React，Angular考虑中~</p><p>vue项目模块已经帮你配置：</p><ul><li>常用的目录结构（你可以在此基础上修改）</li><li>vue.config.js（其中配置了别名，你可以自行修改和配置更多）</li><li>axios（网络请求axios的安装以及二次封装）</li><li>vue-router（router的安装和配置，另外有路由的动态加载，后面详细说明）</li><li>vuex（vuex的安装和配置，另外有动态加载子模块，后面详细说明）</li></ul><p>创建项目</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>coderwhy create your_project_name</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>自动拉取项目模板、安装项目依赖、打开浏览器 <code>http://localhost:8080/</code>、自动启动项目</p><h3 id="二-项目开发" tabindex="-1"><a class="header-anchor" href="#二-项目开发"><span>二. 项目开发</span></a></h3><p>项目开发目前提供三个功能：</p><ul><li>创建Vue组件</li><li>创建Vue页面，并配置路由</li><li>创建Vuex子模块</li></ul><h4 id="_2-1-创建vue组件" tabindex="-1"><a class="header-anchor" href="#_2-1-创建vue组件"><span>2.1. 创建Vue组件：</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>coderwhy addcpn YourComponentName # 例如coderwhy add NavBar，默认会存放到src/components文件夹中</span></span>
<span class="line"><span>coderwhy addcpn YourComponentName -d src/pages/home # 也可以指定存放的具体文件夹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-创建vue页面-并配置路由" tabindex="-1"><a class="header-anchor" href="#_2-2-创建vue页面-并配置路由"><span>2.2. 创建Vue页面，并配置路由</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>coderwhy addpage YourPageName # 例如coderwhy addpage Home，默认会放到src/pages/home/Home.vue中，并且会创建src/page/home/router.js</span></span>
<span class="line"><span>coderwhy addpage YourPageName -d src/views # 也可以指定文件夹，但需要手动集成路由</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>为什么会创建router.js文件：</p><ul><li><code>router.js</code>文件是路由的其中一个配置；</li><li>创建该文件中 <code>src/router/index.js</code>中会自动加载到路由的 <code>routes</code>配置中，不需要手动配置了（如果是自己配置的文件夹需要手动配置）</li></ul><p><code>src/router/index.js</code>中已经完成如下操作：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>// 动态加载pages中所有的路由文件</span></span>
<span class="line"><span>const files = require.context(&#39;@/pages&#39;, true, /router\.js$/);</span></span>
<span class="line"><span>const routes = files.keys().map(key =&gt; {</span></span>
<span class="line"><span>  const page = require(&#39;@/pages&#39; + key.replace(&#39;.&#39;, &#39;&#39;));</span></span>
<span class="line"><span>  return page.default;</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-创建vuex子模块" tabindex="-1"><a class="header-anchor" href="#_2-3-创建vuex子模块"><span>2.3. 创建Vuex子模块</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>coderwhy addstore YourVuexChildModuleName # 例如coderwhy addstore home，默认会放到src/store/modules/home/index.js和types.js</span></span>
<span class="line"><span>coderwhy addstore YourVuexChildModuleName -d src/vuex/modules # 也可以指定文件夹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>创建完成后，不需要手动配置，已经动态将所有子模块集成进去：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>// 动态加载modules</span></span>
<span class="line"><span>const modules = {}</span></span>
<span class="line"><span>const files = require.context(&#39;./&#39;, true, /index\.js$/);</span></span>
<span class="line"><span>files.keys().filter(key =&gt; {</span></span>
<span class="line"><span>  if (key === &#39;./index.js&#39;) return false;</span></span>
<span class="line"><span>  return true</span></span>
<span class="line"><span>}).map(key =&gt; {  </span></span>
<span class="line"><span>  // 获取名字</span></span>
<span class="line"><span>  const modulePath = key.replace(&#39;./modules/&#39;, &#39;&#39;);</span></span>
<span class="line"><span>  const moduleName = modulePath.replace(&#39;/index.js&#39;, &#39;&#39;);</span></span>
<span class="line"><span>  const module = require(`${key}`);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  modules[`${moduleName}`] = module.default;</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="脚手架开发过程" tabindex="-1"><a class="header-anchor" href="#脚手架开发过程"><span>脚手架开发过程</span></a></h2><h3 id="一-创建文件" tabindex="-1"><a class="header-anchor" href="#一-创建文件"><span>一. 创建文件</span></a></h3><p>创建index.js</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>console.log(&quot;Hello Coderwhy&quot;)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>创建package.json</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>  &quot;name&quot;: &quot;coderwhy&quot;,</span></span>
<span class="line"><span>  &quot;version&quot;: &quot;1.1.0&quot;,</span></span>
<span class="line"><span>  &quot;description&quot;: &quot;CLI front-end development tools&quot;,</span></span>
<span class="line"><span>  &quot;main&quot;: &quot;index.js&quot;,</span></span>
<span class="line"><span>  &quot;bin&quot;: {</span></span>
<span class="line"><span>    &quot;coderwhy&quot;: &quot;index.js&quot;</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  &quot;scripts&quot;: {</span></span>
<span class="line"><span>    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  &quot;keywords&quot;: [</span></span>
<span class="line"><span>    &quot;vue&quot;,</span></span>
<span class="line"><span>    &quot;react&quot;,</span></span>
<span class="line"><span>    &quot;CLI&quot;,</span></span>
<span class="line"><span>    &quot;component&quot;</span></span>
<span class="line"><span>  ],</span></span>
<span class="line"><span>  &quot;author&quot;: &quot;coderwhy&quot;,</span></span>
<span class="line"><span>  &quot;license&quot;: &quot;MIT&quot;,</span></span>
<span class="line"><span>  &quot;homepage&quot;: &quot;https://github.com/coderwhy/coderwhy&quot;,</span></span>
<span class="line"><span>  &quot;repository&quot;: {</span></span>
<span class="line"><span>    &quot;type&quot;: &quot;git&quot;,</span></span>
<span class="line"><span>    &quot;url&quot;: &quot;https://github.com/coderwhy/coderwhy&quot;</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  &quot;dependencies&quot;: {</span></span>
<span class="line"><span>    &quot;chalk&quot;: &quot;^4.1.0&quot;,</span></span>
<span class="line"><span>    &quot;commander&quot;: &quot;^6.1.0&quot;,</span></span>
<span class="line"><span>    &quot;download-git-repo&quot;: &quot;^3.0.2&quot;,</span></span>
<span class="line"><span>    &quot;ejs&quot;: &quot;^3.1.5&quot;,</span></span>
<span class="line"><span>    &quot;open&quot;: &quot;^7.3.0&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最终的目录结构：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>├── LICENSE</span></span>
<span class="line"><span>├── index.js</span></span>
<span class="line"><span>├── lib</span></span>
<span class="line"><span>│   ├── config</span></span>
<span class="line"><span>│   │   └── repo_config.js</span></span>
<span class="line"><span>│   ├── core</span></span>
<span class="line"><span>│   │   ├── actions.js</span></span>
<span class="line"><span>│   │   ├── create.js</span></span>
<span class="line"><span>│   │   └── help.js</span></span>
<span class="line"><span>│   ├── template</span></span>
<span class="line"><span>│   │   ├── component.vue.ejs</span></span>
<span class="line"><span>│   │   ├── vue-router.js.ejs</span></span>
<span class="line"><span>│   │   ├── vue-store.js.ejs</span></span>
<span class="line"><span>│   │   └── vue-types.js.ejs</span></span>
<span class="line"><span>│   └── utils</span></span>
<span class="line"><span>│       ├── file.js</span></span>
<span class="line"><span>│       ├── log.js</span></span>
<span class="line"><span>│       └── terminal.js</span></span>
<span class="line"><span>├── package-lock.json</span></span>
<span class="line"><span>├── package.json</span></span>
<span class="line"><span>└── readme.md</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二-创建coderwhy的命令" tabindex="-1"><a class="header-anchor" href="#二-创建coderwhy的命令"><span>二. 创建coderwhy的命令</span></a></h3><p>自动在你的环境变量中查找node</p><p>注意：必须放在第一行</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>#!/usr/bin/env node</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>修改package.json</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>  &quot;bin&quot;: {</span></span>
<span class="line"><span>    &quot;coderwhy&quot;: &quot;index.js&quot;</span></span>
<span class="line"><span>  }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行npm link</p><h3 id="三-commander用法" tabindex="-1"><a class="header-anchor" href="#三-commander用法"><span>三. commander用法</span></a></h3><h4 id="_3-1-定义版本号" tabindex="-1"><a class="header-anchor" href="#_3-1-定义版本号"><span>3.1. 定义版本号</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>#!/usr/bin/env node</span></span>
<span class="line"><span>const cmd = require(&#39;commander&#39;);</span></span>
<span class="line"><span>// 定义显示模块的版本号</span></span>
<span class="line"><span>cmd.version(require(&#39;./package.json&#39;).version);</span></span>
<span class="line"><span>// 解析终端指令</span></span>
<span class="line"><span>cmd.parse(process.argv);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-给help增加其他选项" tabindex="-1"><a class="header-anchor" href="#_3-2-给help增加其他选项"><span>3.2. 给help增加其他选项</span></a></h4><p>添加单个选项</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>program.option(&#39;-s --src &lt;src&gt;&#39;, &#39;a source folder&#39;);</span></span>
<span class="line"><span>program.option(&#39;-d --dest &lt;dest&gt;&#39;, &#39;a destination folder&#39;);</span></span>
<span class="line"><span>program.option(&#39;-f --framework &lt;framework&gt;&#39;, &#39;your framework name&#39;);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>监听help指令</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>program.on(&#39;--help&#39;, function() {</span></span>
<span class="line"><span>  console.log(&quot;&quot;);</span></span>
<span class="line"><span>  console.log(&quot;usage&quot;);</span></span>
<span class="line"><span>  console.log(&quot;   coderwhy -v&quot;);</span></span>
<span class="line"><span>  console.log(&quot;   coderwhy -version&quot;);</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四-创建项目指令" tabindex="-1"><a class="header-anchor" href="#四-创建项目指令"><span>四. 创建项目指令</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>// 创建命令</span></span>
<span class="line"><span>program</span></span>
<span class="line"><span>  .command(&#39;create &lt;project&gt; [otherArgs...]&#39;)</span></span>
<span class="line"><span>  .description(&#39;clone a repository into a newly created directory&#39;)</span></span>
<span class="line"><span>  .action((project, otherArgs) =&gt; {</span></span>
<span class="line"><span>    console.log(project);</span></span>
<span class="line"><span>    console.log(otherArgs);</span></span>
<span class="line"><span>   // 调用封装的函数</span></span>
<span class="line"><span>   createProject(project, otherArgs)</span></span>
<span class="line"><span>  })</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在actions中封装创建过程：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const downloadRepo = promisify(require(&#39;download-git-repo&#39;));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const createProject = async (project, otherArg) =&gt; {</span></span>
<span class="line"><span>  // 1.提示信息</span></span>
<span class="line"><span>  console.log(&#39;coderwhy helps you create your project, please wait a moment~&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // 2.clone项目从仓库</span></span>
<span class="line"><span>  await downloadRepo(repoConfig.vueGitRepo, project, { clone: true });</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // 3.执行终端命令npm install</span></span>
<span class="line"><span>  // terminal.exec(&#39;npm install&#39;, {cwd: `./${project}`});</span></span>
<span class="line"><span>  const npm = process.platform === &#39;win32&#39; ? &#39;npm.cmd&#39; : &#39;npm&#39;;</span></span>
<span class="line"><span>  await terminal.spawn(npm, [&#39;install&#39;], { cwd: `./${project}` });</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // 4.打开浏览器</span></span>
<span class="line"><span>  open(&#39;http://localhost:8080/&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // 5.运行项目</span></span>
<span class="line"><span>  await terminal.spawn(npm, [&#39;run&#39;, &#39;serve&#39;], { cwd: `./${project}` });</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置的Git地址如下：</p><ul><li>后续会开发一个设置自己地址的指令</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const vueGitRepo = &quot;direct:https://github.com/coderwhy/hy-vue-temp.git&quot;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>module.exports = {</span></span>
<span class="line"><span>  vueGitRepo</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>封装执行终端命令的过程：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const { spawn, exec } = require(&#39;child_process&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const spawnCommand = (...args) =&gt; {</span></span>
<span class="line"><span>  return new Promise((resolve, reject) =&gt; {</span></span>
<span class="line"><span>    const childProcess = spawn(...args);</span></span>
<span class="line"><span>    childProcess.stdout.pipe(process.stdout);</span></span>
<span class="line"><span>    childProcess.stderr.pipe(process.stderr);</span></span>
<span class="line"><span>    childProcess.on(&#39;close&#39;, () =&gt; {</span></span>
<span class="line"><span>      resolve();</span></span>
<span class="line"><span>    });</span></span>
<span class="line"><span>  })</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="process和child-process使用" tabindex="-1"><a class="header-anchor" href="#process和child-process使用"><span><strong>process和child_process使用</strong></span></a></h4><h5 id="process" tabindex="-1"><a class="header-anchor" href="#process"><span>process</span></a></h5><p>在Node.js中每个应用程序都是一个进程类的实例对象。使用process对象代表应用程序,这是一个全局对象，可以通过它来获取Node.jsy应用程序以及运行该程序的用户、环境等各种信息的属性、方法和事件</p><p>进程中几个重要的属性</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>stdin 标准输入可读流</span></span>
<span class="line"><span>stdout 标准输入可写流</span></span>
<span class="line"><span>stderr 标准错误输出流</span></span>
<span class="line"><span>argv 终端输入参数数组</span></span>
<span class="line"><span>env 操作系统环境信息</span></span>
<span class="line"><span>pid 应用程序进程id</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>进程方法</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>process.memoryUsage() 查看内存使用信息</span></span>
<span class="line"><span>process.nextTick() 当前eventloop执行完毕执行回调函数</span></span>
<span class="line"><span>process.chdir() chdir方法用于修改Node.js应用程序中使用的当前工作目录</span></span>
<span class="line"><span>process.cwd() 进程当前工作目录</span></span>
<span class="line"><span>process.kill() 杀死进程</span></span>
<span class="line"><span>process.uncaughtException() 当应用程序抛出一个未被捕获的异常时触发进程对象的uncaughtException事件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="child-process" tabindex="-1"><a class="header-anchor" href="#child-process"><span>child_process</span></a></h5><p>在Node.js中，提供了一个child_process模块,通过它可以开启多个子进程，在多个子进程之间可以共享内存空间，可以通过子进程的互相通信来实现信息的交换,child_process模块给予node任意创建子进程的能力，node官方文档对于child_proces模块给出了四种方法，映射到操作系统其实都是创建子进程。但对于开发者而已，这几种方法的api有点不同</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>child_process.exec(command[, options][, callback]) 启动子进程来执行shell命令,可以通过回调参数来获取脚本shell执行结果</span></span>
<span class="line"><span>child_process.execfile(file[, args][, options][, callback]) 与exec类型不同的是，它执行的不是shell命令而是一个可执行文件</span></span>
<span class="line"><span>child_process.spawn(command[, args][, options])仅仅执行一个shell命令，不需要获取执行结果\</span></span>
<span class="line"><span>child_process.fork(modulePath[, args][, options]) 可以用node执行的.js文件，也不需要获取执行结果。fork出来的子进程一定是node进程</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//exec用法:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//执行shell脚本, 使用管道符也是可以的</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//exec也是可以执行文件的，只不过不能传参数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//适合开销比较小的任务</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> cp</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;child_process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">cp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ls -al|grep node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 超时时间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 可以改变当前的执行路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }, </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">stdout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">stderr</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // 执行结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//execFile用法:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//可以执行文件，也可以执行语句，可传参</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//适合开销比较小的任务</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 执行文件,参数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">cp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">execFile</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;ls&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;-al&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">stdout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">std</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // 执行结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 让execFile执行ls -al|grep node_modules这种语句</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//test.shell:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  ls</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">al</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">grep</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> node_modules</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $1</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> // 打印参数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//index.js:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">cp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">execFile</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">__dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;test.shell&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">), [</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;-al&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;bl&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">], </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,   </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">stdout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">stderr</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//fork用法</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//用node执行, 耗时操作且用node实现，如下载文件</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// cp.fork(模块路径)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 和require一样把文件执行起来</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> child</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> cp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">fork</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">__dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;child_process_demo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 主进程向子进程通信</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">child</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;hello child_process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // child.disconnent() // 如果不断开，两边会出现等待的情况</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 子进程向主进程通信</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">child</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">msg</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// child_process_demo.js:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;aaa&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">msg</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // 很容易出现死循环</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;send msg to parent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 进程不一样,完全独立，本质也是调用spawn</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//spawn 用法</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">//spawn: 流式的，没有回调，适合耗时任务(比如：npm install), 需要不断打印日志(不断给用户输出日志</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">cp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 不支持回调, exec,execFile底层都是spwan</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> childProcess</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> cp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">__dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;test.shell&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">), [</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;-al&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;-bl&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;..&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}) </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 返回的是子进程</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">childProcess</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">childProcess</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 监听成功</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">childProcess</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">stdout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 监听失败</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">childProcess</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">stderr</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> code</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> `require(&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">rootFile</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;).call(null, </span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">args</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> // cp.spawn(&#39;cmd&#39;, [&#39;/c&#39;, &#39;node&#39;, &#39;-e&#39;, code]) // win下是这种结构</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> childProcess</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;node&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;-e&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">   cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 当前执行未知的cwd</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">   stdio</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;inherit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// 默认是pipe,pipe必须通过on来接收信息，inherit不需要，实时反馈</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> childProcess</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">   log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">   process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">childProcess</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;exit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">verbose</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;命令执行成功&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="五-添加组件指令" tabindex="-1"><a class="header-anchor" href="#五-添加组件指令"><span>五. 添加组件指令</span></a></h3><h4 id="_5-1-封装ejs模板" tabindex="-1"><a class="header-anchor" href="#_5-1-封装ejs模板"><span>5.1. 封装ejs模板</span></a></h4><p>组件模块如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;%_ if(data) { _%&gt;</span></span>
<span class="line"><span>&lt;template&gt;</span></span>
<span class="line"><span>  &lt;div class=&quot;&lt;%= data.lowerName %&gt;&quot;&gt;</span></span>
<span class="line"><span>    &lt;h2&gt;{{ message }}&lt;/h2&gt;</span></span>
<span class="line"><span>  &lt;/div&gt;</span></span>
<span class="line"><span>&lt;/template&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;script&gt;</span></span>
<span class="line"><span>  export default {</span></span>
<span class="line"><span>    name: &quot;&lt;%= data.name %&gt;&quot;,</span></span>
<span class="line"><span>    components: {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    mixins: [],</span></span>
<span class="line"><span>    props: {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    data: function() {</span></span>
<span class="line"><span>      return {</span></span>
<span class="line"><span>        message: &quot;Hello &lt;%= data.name %&gt;&quot;</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    created: function() {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    mounted: function() {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    computed: {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    methods: {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>&lt;/script&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;style scoped&gt;</span></span>
<span class="line"><span>  .&lt;%= data.lowerName %&gt; {</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>&lt;/style&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;%_ } _%&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>路由模板：</p><ul><li>组件模板，直接使用上面的即可</li><li>router.js模板</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>&lt;%_ if (data) { _%&gt;</span></span>
<span class="line"><span>// 普通加载路由</span></span>
<span class="line"><span>// import &lt;%= data.name %&gt; from &#39;./&lt;%= data.name %&gt;.vue&#39;</span></span>
<span class="line"><span>// 懒加载路由</span></span>
<span class="line"><span>const &lt;%= data.name %&gt; = () =&gt; import(&#39;./&lt;%= data.name %&gt;.vue&#39;)</span></span>
<span class="line"><span>export default {</span></span>
<span class="line"><span>  path: &#39;/&lt;%= data.lowerName %&gt;&#39;,</span></span>
<span class="line"><span>  name: &#39;&lt;%= data.name %&gt;&#39;,</span></span>
<span class="line"><span>  component: &lt;%= data.name %&gt;,</span></span>
<span class="line"><span>  children: [</span></span>
<span class="line"><span>  ]</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>&lt;%_ } _%&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vuex模块的模板</p><ul><li>index.js模板</li><li>types.js模板</li></ul><p>index.js模块</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>import * as types from &#39;./types.js&#39;</span></span>
<span class="line"><span>export default {</span></span>
<span class="line"><span>  namespaced: true,</span></span>
<span class="line"><span>  state: {</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  mutations: {</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  actions: {</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  getters: {</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>types.js模块</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>export {</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-2-封装ejs解析" tabindex="-1"><a class="header-anchor" href="#_5-2-封装ejs解析"><span>5.2. 封装ejs解析</span></a></h4><p>封装ejs的编译过程：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const ejsCompile = (templatePath, data={}, options = {}) =&gt; {</span></span>
<span class="line"><span>  return new Promise((resolve, reject) =&gt; {</span></span>
<span class="line"><span>    ejs.renderFile(templatePath, {data}, options, (err, str) =&gt; {</span></span>
<span class="line"><span>      if (err) {</span></span>
<span class="line"><span>        reject(err);</span></span>
<span class="line"><span>        return;</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>      resolve(str);</span></span>
<span class="line"><span>    })</span></span>
<span class="line"><span>  })</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>封装创建文件夹的过程：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const mkdirSync = (dirname) =&gt; {</span></span>
<span class="line"><span>  if (fs.existsSync(dirname)) {</span></span>
<span class="line"><span>    return true</span></span>
<span class="line"><span>  } else {</span></span>
<span class="line"><span>    // 不存在,判断父亲文件夹是否存在？</span></span>
<span class="line"><span>    if (mkdirSync(path.dirname(dirname))) {</span></span>
<span class="line"><span>      // 存在父亲文件，就直接新建该文件</span></span>
<span class="line"><span>      fs.mkdirSync(dirname)</span></span>
<span class="line"><span>      return true</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>封装写入文件的过程：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const writeFile = (path, content) =&gt; {</span></span>
<span class="line"><span>  if (fs.existsSync(path)) {</span></span>
<span class="line"><span>    log.error(&quot;the file already exists~&quot;)</span></span>
<span class="line"><span>    return;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  return fs.promises.writeFile(path, content);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>封装ejs到文件的转化过程：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const handleEjsToFile = async (name, dest, template, filename) =&gt; {</span></span>
<span class="line"><span>  // 1.获取模块引擎的路径</span></span>
<span class="line"><span>  const templatePath = path.resolve(__dirname, template);</span></span>
<span class="line"><span>  const result = await ejsCompile(templatePath, {name, lowerName: name.toLowerCase()});</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  // 2.写入文件中</span></span>
<span class="line"><span>  // 判断文件不存在,那么就创建文件</span></span>
<span class="line"><span>  mkdirSync(dest);</span></span>
<span class="line"><span>  const targetPath = path.resolve(dest, filename);</span></span>
<span class="line"><span>  writeFile(targetPath, result);</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-3-创建添加指令" tabindex="-1"><a class="header-anchor" href="#_5-3-创建添加指令"><span>5.3. 创建添加指令</span></a></h4><p>添加指令</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>program</span></span>
<span class="line"><span>  .command(&#39;addcpn &lt;name&gt;&#39;)</span></span>
<span class="line"><span>  .description(&#39;add vue component, 例如: coderwhy addcpn NavBar [-d src/components]&#39;)</span></span>
<span class="line"><span>  .action(name =&gt; addComponent(name, program.dest || &#39;src/components&#39;))</span></span>
<span class="line"><span></span></span>
<span class="line"><span>program</span></span>
<span class="line"><span>  .command(&#39;addpage &lt;name&gt;&#39;)</span></span>
<span class="line"><span>  .description(&#39;add vue page, 例如: coderwhy addpage Home [-d dest]&#39;)</span></span>
<span class="line"><span>  .action(name =&gt; {</span></span>
<span class="line"><span>  addPage(name, program.dest || `src/pages/${name.toLowerCase()}`)</span></span>
<span class="line"><span>})</span></span>
<span class="line"><span></span></span>
<span class="line"><span>program</span></span>
<span class="line"><span>  .command(&#39;addstore &lt;name&gt;&#39;)</span></span>
<span class="line"><span>  .description(&#39;add vue store, 例如: coderwhy addstore favor [-d dest]&#39;)</span></span>
<span class="line"><span>  .action(name =&gt; {</span></span>
<span class="line"><span>  addStore(name, program.dest || `src/store/modules/${name.toLowerCase()}`)</span></span>
<span class="line"><span>})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>封装对应的action</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>const addComponent = async (name, dest) =&gt; {</span></span>
<span class="line"><span>  handleEjsToFile(name, dest, &#39;../template/component.vue.ejs&#39;, `${name}.vue`);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const addPage = async (name, dest) =&gt; {</span></span>
<span class="line"><span>  addComponent(name, dest);</span></span>
<span class="line"><span>  handleEjsToFile(name, dest, &#39;../template/vue-router.js.ejs&#39;, &#39;router.js&#39;)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>const addStore = async (name, dest) =&gt; {</span></span>
<span class="line"><span>  handleEjsToFile(name, dest, &#39;../template/vue-store.js.ejs&#39;, &#39;index.js&#39;)</span></span>
<span class="line"><span>  handleEjsToFile(name, dest, &#39;../template/vue-types.js.ejs&#39;, &#39;types.js&#39;)</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="六-发布工具" tabindex="-1"><a class="header-anchor" href="#六-发布工具"><span>六. 发布工具</span></a></h3><p>注册npm账号：</p><ul><li>https://www.npmjs.com/</li><li>选择sign up</li></ul><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/O8xWXzAqXuvsfCKCtp2lQ6qFNLhNLWZicFXVpMZmib38NiaDoibicwJyAY4TJOGiaGHtMicVRibkb1zkwYFtAZsPgKma1Q/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" loading="lazy">sign up注册</p><p>在命令行登录：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>npm login</span></span>
<span class="line"><span># 输入账号、密码、邮箱</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>修改好package.json文件：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>  &quot;keywords&quot;: [</span></span>
<span class="line"><span>    &quot;vue&quot;,</span></span>
<span class="line"><span>    &quot;react&quot;,</span></span>
<span class="line"><span>    &quot;CLI&quot;,</span></span>
<span class="line"><span>    &quot;component&quot;</span></span>
<span class="line"><span>  ],</span></span>
<span class="line"><span>  &quot;author&quot;: &quot;coderwhy&quot;,</span></span>
<span class="line"><span>  &quot;license&quot;: &quot;MIT&quot;,</span></span>
<span class="line"><span>  &quot;homepage&quot;: &quot;https://github.com/coderwhy/coderwhy&quot;,</span></span>
<span class="line"><span>  &quot;repository&quot;: {</span></span>
<span class="line"><span>    &quot;type&quot;: &quot;git&quot;,</span></span>
<span class="line"><span>    &quot;url&quot;: &quot;https://github.com/coderwhy/coderwhy&quot;</span></span>
<span class="line"><span>  },</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发布到npm registry中</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>npm publish</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>更新registry</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span># 1.修改版本号(最好符合semver规范)</span></span>
<span class="line"><span># 2.重新发布</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>删除发布的包：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>npm unpublish</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>过期发布的包：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>npm deprecate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><!----></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: chriswoodcn@aliyun.com">chriswoodcn</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E4%B8%80.html" aria-label="Node基础一"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Node基础一</div></a><a class="route-link auto-link next" href="/zh/posts/node/base/Node%E5%9F%BA%E7%A1%80%E5%85%AB.html" aria-label="Node基础八"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Node基础八<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright"><div>Copyright &copy; 2024 Chris Wood, All Rights Reserved.<div></div></footer></div><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-D5FmEbjh.js" defer></script>
  </body>
</html>
