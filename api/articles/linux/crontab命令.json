{"title":"crontab命令","uid":"7e88b6e7d56f70f641065fe39e058881","slug":"linux/crontab命令","date":"2023-06-20T01:58:10.000Z","updated":"2023-07-04T07:53:31.839Z","comments":true,"path":"api/articles/linux/crontab命令.json","keywords":"chriswood blogs sharing","cover":null,"content":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>crontab命令常见于Unix和类Unix的操作系统之中，用于设置周期性被执行的指令。该命令从标准输入设备读取指令，<br>并将其存放于“crontab”文件中（是“cron table”的简写）</p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><h3 id=\"检查crontab服务\"><a href=\"#检查crontab服务\" class=\"headerlink\" title=\"检查crontab服务\"></a>检查crontab服务</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">crontab -l\n#显示‘no crontab for root’ 或者 当前的任务列表 或者 不报错 说明已经安装</code></pre>\n<h4 id=\"安装crontab服务\"><a href=\"#安装crontab服务\" class=\"headerlink\" title=\"安装crontab服务\"></a>安装crontab服务</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">#centOS\nyum -y install vixie-cron crontabs\n#ubuntu\napt-get install cron</code></pre>\n<h4 id=\"cron-服务的启动与关闭\"><a href=\"#cron-服务的启动与关闭\" class=\"headerlink\" title=\"cron 服务的启动与关闭\"></a>cron 服务的启动与关闭</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># centOS\n# 查看cond 状态\nservice crond status\n# 启动cron\nservice crond start\n# 关闭cron\nservice crond stop\n# 重启cron\nservice crond restart\n\n# ubuntu\n# 查看cond 状态\nservice cron status\n# 启动cron\nservice cron start\n# 关闭cron\nservice cron stop\n# 重启cron\nservice cron restart</code></pre>\n\n<h3 id=\"crontab命令\"><a href=\"#crontab命令\" class=\"headerlink\" title=\"crontab命令\"></a>crontab命令</h3><p>通过crontab命令，我们可以在固定的间隔时间执行指定的系统指令或 shell script脚本。时间间隔的单位可以是<br>分钟、小时、日、月、周及以上的任意组合。这个命令非常设合周期性的日志分析或数据备份等工作。</p>\n<h4 id=\"crontab命令格式\"><a href=\"#crontab命令格式\" class=\"headerlink\" title=\"crontab命令格式\"></a>crontab命令格式</h4><pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">crontab [-u user] file\ncrontab [-u user] [ -e | -l | -r ]\n\n-u user：用来设定某个用户的crontab服务，例如，“-u ixdba”表示设定ixdba用户的crontab服务，此参数一般有root用户来运行。\nfile：file是命令文件的名字,表示将file做为crontab的任务列表文件并载入crontab。如果在命令行中没有指定这个文件，crontab命令将接受标准输入（键盘）上键入的命令，并将它们载入crontab。\n-e：编辑某个用户的crontab文件内容。如果不指定用户，则表示编辑当前用户的crontab文件。\n-l：显示某个用户的crontab文件内容，如果不指定用户，则表示显示当前用户的crontab文件内容。\n-r：从&#x2F;var&#x2F;spool&#x2F;cron目录中删除某个用户的crontab文件，如果不指定用户，则默认删除当前用户的crontab文件。\n-i：在删除用户的crontab文件时给确认提示。</code></pre>\n<h4 id=\"crontab文件格式\"><a href=\"#crontab文件格式\" class=\"headerlink\" title=\"crontab文件格式\"></a>crontab文件格式</h4><pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">minute   hour   day   month   week   command\n# Example of job definition:\n.---------------------------------- minute (0 - 59) 表示分钟\n|  .------------------------------- hour (0 - 23)   表示小时\n|  |  .---------------------------- day of month (1 - 31)   表示日期\n|  |  |  .------------------------- month (1 - 12) OR jan,feb,mar,apr ... 表示月份\n|  |  |  |  .---------------------- day of week (0 - 6) (Sunday&#x3D;0 or 7) OR sun,mon,tue,wed,thu,fri,sat  表示星期（0 或 7 表示星期天）\n|  |  |  |  |  .------------------- username  以哪个用户来执行 \n|  |  |  |  |  |            .------ command  要执行的命令，可以是系统命令，也可以是自己编写的脚本文件\n|  |  |  |  |  |            |\n*  *  *  *  * user-name  command to be executed</code></pre>\n<p>示例：</p>\n<pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">*&#x2F;1 * * * * service httpd restart\t               每一分钟 重启httpd服务\n0 *&#x2F;1 * * * service httpd restart\t               每一小时 重启httpd服务\n30 21 * * * service httpd restart\t               每天 21：30 分 重启httpd服务\n26 4 1,5,23,28 * * service httpd restart\t       每月的1号，5号 23 号 28 号 的4点26分，重启httpd服务\n26 4 1-21 * * service httpd restart\t               每月的1号到21号 的4点26分，重启httpd服务\n*&#x2F;2 * * * * service httpd restart\t               每隔两分钟 执行，偶数分钟 重启httpd服务\n1-59&#x2F;2 * * * * service httpd restart\t           每隔两分钟 执行，奇数 重启httpd服务\n0 23-7&#x2F;1 * * * service httpd restart\t           每天的晚上11点到早上7点 每隔一个小时 重启httpd服务\n0,30 18-23 * * * service httpd restart\t           每天18点到23点 每隔30分钟 重启httpd服务\n0-59&#x2F;30 18-23 * * * service httpd restart\t       每天18点到23点 每隔30分钟 重启httpd服务\n59 1 1-7 4 0 &#x2F;root&#x2F;a.sh                            四月的第一个星期日 01:59 分运行脚本 &#x2F;root&#x2F;a.sh\n\n*表示任何时候都匹配\n&quot;a,b,c&quot; 表示a 或者 b 或者c 执行命令\n&quot;a-b&quot; 表示a到b 之间 执行命令\n&quot;*&#x2F;a&quot; 表示每 a单位 执行一次</code></pre>\n<h4 id=\"crontab配置文件\"><a href=\"#crontab配置文件\" class=\"headerlink\" title=\"crontab配置文件\"></a>crontab配置文件</h4><pre class=\"line-numbers language-text\" data-language=\"text\"><code class=\"language-text\">&#x2F;etc&#x2F;crontab\t     全局配置文件\n&#x2F;etc&#x2F;cron.d\t         这个目录用来存放任何要执行的crontab文件或脚本\n&#x2F;etc&#x2F;cron.deny\t     该文件中所列用户不允许使用crontab命令\n&#x2F;etc&#x2F;cron.allow\t     该文件中所列用户允许使用crontab命令\n&#x2F;var&#x2F;spool&#x2F;cron&#x2F;\t 所有用户crontab文件存放的目录,以用户名命名，比如你是root 用户，那么当你添加任务是，就会在该路径下有一个root文件。\n&#x2F;etc&#x2F;cron.deny\t     该文件中所列用户不允许使用crontab命令\n&#x2F;var&#x2F;log&#x2F;cron\t     crontab的日志文件</code></pre>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ol>\n<li>环境变量的值，在crontab文件中获取不到，可以写脚本替代</li>\n<li>在crontab中%是有特殊含义的，表示换行的意思。如果要用的话必须进行转义%</li>\n</ol>\n","feature":true,"text":"简介crontab命令常见于Unix和类Unix的操作系统之中，用于设置周期性被执行的指令。该命令从标准输入设备读取指令，并将其存放于“crontab”文件中（是“cron table”的简写） 使用检查crontab服务crontab -l #显示‘no crontab for...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"Linux","slug":"Linux","count":2,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":2,"path":"api/tags/Linux.json"},{"name":"crontab","slug":"crontab","count":1,"path":"api/tags/crontab.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%AE%80%E4%BB%8B\"><span class=\"toc-text\">简介</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A3%80%E6%9F%A5crontab%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">检查crontab服务</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85crontab%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">安装crontab服务</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#cron-%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%90%AF%E5%8A%A8%E4%B8%8E%E5%85%B3%E9%97%AD\"><span class=\"toc-text\">cron 服务的启动与关闭</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#crontab%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">crontab命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#crontab%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F\"><span class=\"toc-text\">crontab命令格式</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#crontab%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F\"><span class=\"toc-text\">crontab文件格式</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#crontab%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">crontab配置文件</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\"><span class=\"toc-text\">注意事项</span></a></li></ol></li></ol>","author":{"name":"ChrisWood","slug":"blog-author","avatar":"https://chriswood-blog.oss-cn-shanghai.aliyuncs.com/me/avatar.png","link":"/","description":"Think like an artist, code like an artisan.","socials":{"github":"https://github.com/chriswoodcn","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"istio配置","uid":"708f551e23a08f2050cf93b09b6e8664","slug":"kubernetes/istio配置","date":"2023-06-20T05:40:32.000Z","updated":"2023-07-04T07:53:31.839Z","comments":true,"path":"api/articles/kubernetes/istio配置.json","keywords":"chriswood blogs sharing","cover":null,"text":"Gateway https://istio.io/latest/zh/docs/reference/config/networking/gateway/ 网关描述了在网格边缘运行的负载均衡器，接收传入或传出的 HTTP&#x2F;TCP 连接.该规范描述了一组应该公开的端口、要使...","link":"","photos":[],"count_time":{"symbolsCount":"4.9k","symbolsTime":"4 mins."},"categories":[{"name":"kubenetes","slug":"kubenetes","count":1,"path":"api/categories/kubenetes.json"}],"tags":[{"name":"kubernetes","slug":"kubernetes","count":7,"path":"api/tags/kubernetes.json"},{"name":"istio","slug":"istio","count":2,"path":"api/tags/istio.json"}],"author":{"name":"ChrisWood","slug":"blog-author","avatar":"https://chriswood-blog.oss-cn-shanghai.aliyuncs.com/me/avatar.png","link":"/","description":"Think like an artist, code like an artisan.","socials":{"github":"https://github.com/chriswoodcn","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"istio入门","uid":"983f96d2354b5cf26dadd3c84b063a40","slug":"kubernetes/istio入门","date":"2023-06-20T00:14:34.000Z","updated":"2023-07-04T07:53:31.839Z","comments":true,"path":"api/articles/kubernetes/istio入门.json","keywords":"chriswood blogs sharing","cover":null,"text":"##简单部署及开放入口 安装minikube安装 https://minikube.sigs.k8s.io/docs/start/ minikube start helm安装istio https://istio.io/latest/zh/docs/setup/install/h...","link":"","photos":[],"count_time":{"symbolsCount":"35k","symbolsTime":"31 mins."},"categories":[{"name":"kubernetes","slug":"kubernetes","count":6,"path":"api/categories/kubernetes.json"}],"tags":[{"name":"kubernetes","slug":"kubernetes","count":7,"path":"api/tags/kubernetes.json"},{"name":"istio","slug":"istio","count":2,"path":"api/tags/istio.json"}],"author":{"name":"ChrisWood","slug":"blog-author","avatar":"https://chriswood-blog.oss-cn-shanghai.aliyuncs.com/me/avatar.png","link":"/","description":"Think like an artist, code like an artisan.","socials":{"github":"https://github.com/chriswoodcn","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}